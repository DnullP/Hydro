(()=>{try{let we=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},Be=new we.Error().stack;Be&&(we._sentryDebugIds=we._sentryDebugIds||{},we._sentryDebugIds[Be]="7e526a0b-42a7-44e9-92fe-3c8d8f42c839",we._sentryDebugIdIdentifier="sentry-dbid-7e526a0b-42a7-44e9-92fe-3c8d8f42c839")}catch(we){}{let we=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};we.SENTRY_RELEASE={id:"2267ac9984bf2a03311b765d1b1928f9f4cc2bd8"}}(self.webpackChunk_hydrooj_ui_default=self.webpackChunk_hydrooj_ui_default||[]).push([[741],{62055:(we,Be,N)=>{N.d(Be,{E:()=>Sa});var d=N(36388),s=N(98392),it=Object.defineProperty,xt=(e,t,l)=>t in e?it(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,kt=(e,t,l)=>xt(e,typeof t!="symbol"?t+"":t,l);class ct{constructor(){kt(this,"pools",{})}remove(t,l,r){const c=this.pools[t]&&this.pools[t][l];c&&(this.pools[t][l]=c.filter(a=>a!==r))}clear(t){this.pools[t]={}}on(t,l){return this.pools[t]||(this.pools[t]={}),this.pools[t][l.name]||(this.pools[t][l.name]=[]),this.pools[t][l.name].push(l.callback),this.pools[t][l.name].includes(l.callback)}emit(t,l,...r){this.pools[t]||(this.pools[t]={});const c=this.pools[t][l];c&&c.forEach(a=>{try{a(...r)}catch(i){console.error(`${l} monitor event exception\uFF01`,i)}})}}const C=new ct,Oe="onSave",G="changeCatalogVisible",Ke="changeFullscreen",Xe="pageFullscreenChanged",dt="fullscreenChanged",ut="previewChanged",mt="previewOnlyChanged",pt="htmlPreviewChanged",Ze="catalogVisibleChanged",ze="buildFinished",be="errorCatcher",W="replace",Me="uploadImage",qe="openModals",Ve="ctrlZ",Qe="ctrlShiftZ",Re="catalogChanged",_="pushCatalog",se="rerender",he="eventListener",yt="taskStateChanged";var o=N(35156),$o=Object.defineProperty,St=Object.getOwnPropertySymbols,Co=Object.prototype.hasOwnProperty,To=Object.prototype.propertyIsEnumerable,Pt=(e,t,l)=>t in e?$o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,Eo=(e,t)=>{for(var l in t||(t={}))Co.call(t,l)&&Pt(e,l,t[l]);if(St)for(var l of St(t))To.call(t,l)&&Pt(e,l,t[l]);return e};const jo=(e,t)=>{const l=r=>{const c=e.parentElement||document.body,a=c.offsetWidth,i=c.offsetHeight,{clientWidth:n,clientHeight:h}=document.documentElement,g=r.offsetX,p=r.offsetY,m=k=>{let v=k.x+document.body.scrollLeft-document.body.clientLeft-g,y=k.y+document.body.scrollTop-document.body.clientTop-p;v=v<1?1:v<n-a-1?v:n-a-1,y=y<1?1:y<h-i-1?y:h-i-1,t?t(v,y):(c.style.left=v+"px",c.style.top=y+"px")};document.addEventListener("mousemove",m);const u=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",u)};document.addEventListener("mouseup",u)};return e.addEventListener("mousedown",l),()=>{e.removeEventListener("mousedown",l)}},xe=(e,t,l="")=>{var r;const c=document.getElementById(t.id);if(c)l!==""&&(Reflect.get(window,l)?(r=t.onload)==null||r.call(c,new Event("load")):t.onload&&c.addEventListener("load",t.onload));else{const a=Eo({},t);a.onload=null;const i=No(e,a);t.onload&&i.addEventListener("load",t.onload),document.head.appendChild(i)}},Ao=(e,t)=>{const l=document.getElementById(t.id);l==null||l.remove(),xe(e,t)},No=(e,t)=>{const l=document.createElement(e);return Object.keys(t).forEach(r=>{t[r]!==void 0&&(l[r]=t[r])}),l},Lt=(()=>{const e=t=>{if(!t)return;const l=t.firstChild;let r=1,c=0,a=0,i=!1,n,h,g,p=1;const m=()=>{l.style.transform=`translate(${c}px, ${a}px) scale(${r})`};t.addEventListener("touchstart",u=>{u.touches.length===1?(i=!0,n=u.touches[0].clientX-c,h=u.touches[0].clientY-a):u.touches.length===2&&(g=Math.hypot(u.touches[0].clientX-u.touches[1].clientX,u.touches[0].clientY-u.touches[1].clientY),p=r)},{passive:!1}),t.addEventListener("touchmove",u=>{if(u.preventDefault(),i&&u.touches.length===1)c=u.touches[0].clientX-n,a=u.touches[0].clientY-h,m();else if(u.touches.length===2){const k=Math.hypot(u.touches[0].clientX-u.touches[1].clientX,u.touches[0].clientY-u.touches[1].clientY)/g,v=r;r=p*(1+(k-1));const y=(u.touches[0].clientX+u.touches[1].clientX)/2,$=(u.touches[0].clientY+u.touches[1].clientY)/2,f=l.getBoundingClientRect(),b=(y-f.left)/v,E=($-f.top)/v;c-=b*(r-v),a-=E*(r-v),m()}},{passive:!1}),t.addEventListener("touchend",()=>{i=!1}),t.addEventListener("wheel",u=>{u.preventDefault();const k=.02,v=r;u.deltaY<0?r+=k:r=Math.max(.1,r-k);const y=l.getBoundingClientRect(),$=u.clientX-y.left,f=u.clientY-y.top;c-=$/v*(r-v),a-=f/v*(r-v),m()},{passive:!1}),t.addEventListener("mousedown",u=>{i=!0,n=u.clientX-c,h=u.clientY-a}),t.addEventListener("mousemove",u=>{i&&(c=u.clientX-n,a=u.clientY-h,m())}),t.addEventListener("mouseup",()=>{i=!1}),t.addEventListener("mouseleave",()=>{i=!1})};return t=>{t==null||t.forEach(l=>{e(l)})}})(),le=(0,s.createContext)({editorId:"",tabWidth:2,theme:"light",language:"zh-CN",highlight:{css:"",js:""},showCodeRowNumber:!1,usedLanguageText:o.s["zh-CN"],previewTheme:"default",customIcon:{},rootRef:null,disabled:void 0}),Io=(e,t="image.png")=>{const l=e.split(","),r=l[0].match(/:(.*?);/);if(r){const c=r[1],a=atob(l[1]);let i=a.length;const n=new Uint8Array(i);for(;i--;)n[i]=a.charCodeAt(i);return new File([n],t,{type:c})}return null},So=(e,t)=>{if(!e)return e;const l=t.split(`
`),r=['<span rn-wrapper aria-hidden="true">'];return l.forEach(()=>{r.push("<span></span>")}),r.push("</span>"),`<span class="${o.p}-code-block">${e}</span>${r.join("")}`},M=e=>e.filter(t=>t!==!1&&t!==void 0).join(" "),Po=(e,t)=>{if(!e||!t)return 0;const l=e==null?void 0:e.getBoundingClientRect();if(t===document.documentElement)return l.top-t.clientTop;const r=t==null?void 0:t.getBoundingClientRect();return l.top-r.top},Ft=(()=>{let e=0;return()=>++e})();var Lo=N(66535),Fo=N(84425),Oo=N.n(Fo),Mo=N(6305),Ro=N(1096),Ho=N(68735),Do=N(81550),He=N(62533),Bo=N(81772),zo=Object.defineProperty,Vo=Object.defineProperties,Wo=Object.getOwnPropertyDescriptors,Ot=Object.getOwnPropertySymbols,Uo=Object.prototype.hasOwnProperty,Go=Object.prototype.propertyIsEnumerable,Mt=(e,t,l)=>t in e?zo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,ue=(e,t)=>{for(var l in t||(t={}))Uo.call(t,l)&&Mt(e,l,t[l]);if(Ot)for(var l of Ot(t))Go.call(t,l)&&Mt(e,l,t[l]);return e},Ee=(e,t)=>Vo(e,Wo(t)),Rt=(e,t,l)=>new Promise((r,c)=>{var a=h=>{try{n(l.next(h))}catch(g){c(g)}},i=h=>{try{n(l.throw(h))}catch(g){c(g)}},n=h=>h.done?r(h.value):Promise.resolve(h.value).then(a,i);n((l=l.apply(e,t)).next())});const ke={hljs:`${o.p}-hljs`,hlcss:`${o.p}-hlCss`,prettier:`${o.p}-prettier`,prettierMD:`${o.p}-prettierMD`,cropperjs:`${o.p}-cropper`,croppercss:`${o.p}-cropperCss`,screenfull:`${o.p}-screenfull`,mermaidM:`${o.p}-mermaid-m`,mermaid:`${o.p}-mermaid`,katexjs:`${o.p}-katex`,katexcss:`${o.p}-katexCss`},_o=(e,t)=>{const{value:l,modelValue:r,onSave:c}=e,{editorId:a}=t,[i,n]=(0,s.useState)({buildFinished:!1,html:""});(0,s.useEffect)(()=>{const h=g=>{n(()=>({buildFinished:!0,html:g}))};return C.on(a,{name:ze,callback:h}),()=>{C.remove(a,ze,h)}},[a]),(0,s.useEffect)(()=>{const h=()=>{if(c){const g=new Promise(p=>{if(i.buildFinished)p(i.html);else{const m=u=>{p(u),C.remove(a,ze,m)};C.on(a,{name:ze,callback:m})}});c(l||r||"",g)}};return C.on(a,{name:Oe,callback:h}),()=>{C.remove(a,Oe,h)}},[a,r,c,i.buildFinished,i.html,l]),(0,s.useEffect)(()=>{n(h=>Ee(ue({},h),{buildFinished:!1}))},[l,r])},Ko=e=>{const{noPrettier:t,noUploadImg:l}=e;(0,s.useEffect)(()=>{const{editorExtensions:r,editorExtensionsAttrs:c}=o.d,a=t||!!r.prettier.prettierInstance,i=t||!!r.prettier.parserMarkdownInstance;if(!(l||r.cropper.instance)){const{js:n={},css:h={}}=c.cropper||{};xe("link",Ee(ue({},h),{rel:"stylesheet",href:r.cropper.css,id:ke.croppercss})),xe("script",Ee(ue({},n),{src:r.cropper.js,id:ke.cropperjs}))}if(!a){const{standaloneJs:n={}}=c.prettier||{};xe("script",Ee(ue({},n),{src:r.prettier.standaloneJs,id:ke.prettier}))}if(!i){const{parserMarkdownJs:n={}}=c.prettier||{};xe("script",Ee(ue({},n),{src:r.prettier.parserMarkdownJs,id:ke.prettierMD}))}},[t,l])},Xo=(e,t)=>{(0,s.useEffect)(()=>(C.on(e,{name:be,callback:t}),()=>{C.remove(e,be,t)}),[e,t])},Zo=(e,t)=>{const{editorId:l}=t,{onUploadImg:r}=e;(0,s.useEffect)(()=>{const c=(a,i)=>{const n=h=>{C.emit(l,W,"image",{desc:"",urls:h}),i==null||i()};r==null||r(a,n)};return C.on(l,{name:Me,callback:c}),()=>{C.remove(l,Me,c)}},[l,r])},qo=(e,t)=>{const{editorId:l}=t,[r,c]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{const a=i=>{c(i===void 0?n=>!n:i)};return C.on(l,{name:G,callback:a}),()=>{C.remove(l,G,a)}},[l]),r};let Ht="";const Qo=e=>{const{theme:t=o.f.theme,preview:l=o.f.preview,htmlPreview:r=o.f.htmlPreview,pageFullscreen:c=o.f.pageFullscreen,previewTheme:a=o.f.previewTheme,codeTheme:i=o.f.codeTheme,language:n=o.f.language,codeStyleReverse:h=o.f.codeStyleReverse,codeStyleReverseList:g=o.f.codeStyleReverseList}=e,p=(0,s.useMemo)(()=>{const $=o.d.editorExtensions.highlight,f=o.d.editorExtensionsAttrs.highlight,{js:b}=$,E=ue(ue({},o.g),$.css),{js:w,css:j={}}=f||{},A=h&&g.includes(a)?"dark":t,L=E[i]?E[i][A]:o.g.atom[A],S=E[i]&&j[i]?j[i][A]:j.atom?j.atom[A]:{};return{js:ue({src:b},w),css:ue({href:L},S)}},[h,g,a,t,i]),m=(0,s.useMemo)(()=>{const $=ue(ue({},o.s),o.d.editorConfig.languageUserDefined);return $[n]?$[n]:o.s["zh-CN"]},[n]),[u,k]=(0,s.useState)({pageFullscreen:c,fullscreen:!1,preview:l,htmlPreview:l?!1:r,previewOnly:!1}),v=(0,s.useRef)(u),y=(0,s.useCallback)(($,f)=>{k(b=>{const E=f===void 0?!b[$]:f,w=ue({},b);switch($){case"preview":{w.htmlPreview=!1,w.previewOnly=!1;break}case"htmlPreview":{w.preview=!1,w.previewOnly=!1;break}case"previewOnly":{E?!w.preview&&!w.htmlPreview&&(w.preview=!0):(v.current.preview||(w.preview=!1),v.current.htmlPreview||(w.htmlPreview=!1));break}}return v.current[$]=E,w[$]=E,w})},[]);return(0,s.useEffect)(()=>{Ht=document.body.style.overflow},[]),(0,s.useEffect)(()=>{u.pageFullscreen||u.fullscreen?document.body.style.overflow="hidden":document.body.style.overflow=Ht},[u.pageFullscreen,u.fullscreen]),[p,m,u,y]},Yo=(e,t,l,r,c,a)=>{const{editorId:i}=t;(0,s.useEffect)(()=>{C.emit(i,Xe,r.pageFullscreen)},[i,r.pageFullscreen]),(0,s.useEffect)(()=>{C.emit(i,dt,r.fullscreen)},[i,r.fullscreen]),(0,s.useEffect)(()=>{C.emit(i,ut,r.preview)},[i,r.preview]),(0,s.useEffect)(()=>{C.emit(i,mt,r.previewOnly)},[i,r.previewOnly]),(0,s.useEffect)(()=>{C.emit(i,pt,r.htmlPreview)},[i,r.htmlPreview]),(0,s.useEffect)(()=>{C.emit(i,Ze,l)},[l,i]),(0,s.useImperativeHandle)(e,()=>({on(n,h){switch(n){case"pageFullscreen":{C.on(i,{name:Xe,callback(g){h(g)}});break}case"fullscreen":{C.on(i,{name:dt,callback(g){h(g)}});break}case"preview":{C.on(i,{name:ut,callback(g){h(g)}});break}case"previewOnly":{C.on(i,{name:mt,callback(g){h(g)}});break}case"htmlPreview":{C.on(i,{name:pt,callback(g){h(g)}});break}case"catalog":{C.on(i,{name:Ze,callback(g){h(g)}});break}}},togglePageFullscreen(n){c("pageFullscreen",n)},toggleFullscreen(n){C.emit(i,Ke,n)},togglePreview(n){c("preview",n)},togglePreviewOnly(n){c("previewOnly",n)},toggleHtmlPreview(n){c("htmlPreview",n)},toggleCatalog(n){C.emit(i,G,n)},triggerSave(){C.emit(i,Oe)},insert(n){C.emit(i,W,"universal",{generate:n})},focus(n){var h;(h=a.current)==null||h.focus(n)},rerender(){C.emit(i,se)},getSelectedText(){var n;return(n=a.current)==null?void 0:n.getSelectedText()},resetHistory(){var n;(n=a.current)==null||n.resetHistory()},domEventHandlers(n){C.emit(i,he,n)},execCommand(n){C.emit(i,W,n)},getEditorView(){var n;return(n=a.current)==null?void 0:n.getEditorView()}}),[a,i,c])},Jo=e=>{const t=(0,s.useId)();return e.id||e.editorId||o.p+"-"+t.replaceAll(":","")},er=(e,t)=>{const{editorId:l}=(0,s.useContext)(le);(0,s.useEffect)(()=>e.noImgZoomIn?void 0:(()=>{const r=document.querySelectorAll(`#${l}-preview img:not(.not-zoom):not(.medium-zoom-image)`),c=(0,Lo.A)(r,{background:"#00000073"});return()=>{c.detach()}})(),[l,t,e.noImgZoomIn,e.setting])},tr=(e,t,l)=>{const{editorId:r,usedLanguageText:c,customIcon:a,rootRef:i}=(0,s.useContext)(le),{formatCopiedText:n=h=>h}=e;(0,s.useEffect)(()=>{var h;e.setting.preview&&((h=i.current)==null||h.querySelectorAll(`#${r} .${o.p}-preview .${o.p}-code`).forEach(g=>{let p=-1;const m=g.querySelector(`.${o.p}-copy-button`);m&&(m.onclick=u=>{u.preventDefault(),clearTimeout(p);const k=(g.querySelector("input:checked + pre code")||g.querySelector("pre code")).textContent,v=Oo()(n(k)),{text:y,successTips:$,failTips:f}=c.copyCode,b=v?$:f;m.dataset.isIcon?m.dataset.tips=b:m.innerHTML=b,p=window.setTimeout(()=>{m.dataset.isIcon?m.dataset.tips=y:m.innerHTML=y},1500)})}))},[a,r,n,t,l,e.setting.preview,i,c.copyCode])},lr=e=>{const{highlight:t}=(0,s.useContext)(le),l=(0,s.useRef)(o.d.editorExtensions.highlight.instance),[r,c]=(0,s.useState)(!!l.current);return(0,s.useEffect)(()=>{e.noHighlight||o.d.editorExtensions.highlight.instance||Ao("link",Ee(ue({},t.css),{rel:"stylesheet",id:ke.hlcss}))},[t.css,e.noHighlight]),(0,s.useEffect)(()=>{e.noHighlight||l.current||xe("script",Ee(ue({},t.js),{id:ke.hljs,onload(){l.current=window.hljs,c(!0)}}),"hljs")},[]),{hljsRef:l,hljsInited:r}},ht=new Bo.q({max:1e3,ttl:6e5}),or=e=>{const{theme:t,rootRef:l}=(0,s.useContext)(le),{noMermaid:r,sanitizeMermaid:c}=e,a=(0,s.useRef)(o.d.editorExtensions.mermaid.instance),[i,n]=(0,s.useState)(-1),h=(0,s.useCallback)(()=>{ht.clear();const p=a.current;!r&&p&&(p.initialize(o.d.mermaidConfig({startOnLoad:!1,theme:t==="dark"?"dark":"default"})),n(m=>m+1))},[r,t]);(0,s.useEffect)(h,[h]),(0,s.useEffect)(()=>{var p,m;const{editorExtensions:u,editorExtensionsAttrs:k}=o.d;if(r||a.current)return;const v=u.mermaid.js;/\.mjs/.test(v)?(xe("link",Ee(ue({},(p=k.mermaid)==null?void 0:p.js),{rel:"modulepreload",href:v,id:ke.mermaidM})),import(v).then(y=>{a.current=y.default,h()})):xe("script",Ee(ue({},(m=k.mermaid)==null?void 0:m.js),{src:v,id:ke.mermaid,onload(){a.current=window.mermaid,h()}}),"mermaid")},[h,r]);const g=(0,s.useCallback)(()=>Rt(void 0,null,function*(){var p;if(!r&&a.current){const m=((p=l.current)==null?void 0:p.querySelectorAll(`div.${o.p}-mermaid`))||[],u=document.createElement("div"),k=document.body.offsetWidth>1366?document.body.offsetWidth:1366,v=document.body.offsetHeight>768?document.body.offsetHeight:768;u.style.width=k+"px",u.style.height=v+"px",u.style.position="fixed",u.style.zIndex="-10000",u.style.top="-10000";let y=m.length;y>0&&document.body.appendChild(u),yield Promise.allSettled(Array.from(m).map($=>(f=>Rt(void 0,null,function*(){var b;let E=ht.get(f.innerText);if(!E){const w=(0,He.zE)();let j={svg:""};try{j=yield a.current.render(w,f.innerText,u),E=yield c(j.svg);const A=document.createElement("p");A.className=`${o.p}-mermaid`,A.setAttribute("data-processed",""),A.innerHTML=E,(b=A.children[0])==null||b.removeAttribute("height"),ht.set(f.innerText,A.innerHTML),f.dataset.line!==void 0&&(A.dataset.line=f.dataset.line),f.replaceWith(A)}catch(A){}--y===0&&u.remove()}}))($)))}}),[r,l,c]);return{mermaidRef:a,reRender:i,replaceMermaid:g}},rr=e=>{const t=(0,s.useRef)(o.d.editorExtensions.katex.instance),[l,r]=(0,s.useState)(!!t.current);return(0,s.useEffect)(()=>{if(e.noKatex||t.current)return;const{editorExtensions:c}=o.d;xe("script",{src:c.katex.js,id:ke.katexjs,onload(){t.current=window.katex,r(!0)}},"katex"),xe("link",{rel:"stylesheet",href:c.katex.css,id:ke.katexcss})},[e.noKatex]),{katexRef:t,katexInited:l}},nr=(e,t)=>{const l=e.renderer.rules.fence.bind(e.renderer.rules);e.renderer.rules.fence=(r,c,a,i,n)=>{const h=r[c],g=h.content.trim();if(h.info==="mermaid"){let p;r[c].map&&r[c].level===0&&(p=r[c].map[0],r[c].attrSet("data-line",String(p)));const m=ht.get(g);return m?`<p class="${o.p}-mermaid" ${p!==void 0?"data-line="+p:""} data-processed>${m}</p>`:`<div class="${o.p}-mermaid" ${p!==void 0?"data-line="+p:""} data-mermaid-theme=${t.themeRef.current}>${g}</div>`}return l(r,c,a,i,n)}},ft=(e,t)=>{const l=e.attrs?e.attrs.slice():[];return t.forEach(r=>{const c=e.attrIndex(r[0]);c<0?l.push(r):(l[c]=l[c].slice(),l[c][1]+=` ${r[1]}`)}),l},ar=(e,t)=>{const l=[{open:"$$",close:"$$"},{open:"$",close:"$"},{open:"\\[",close:"\\]"},{open:"\\(",close:"\\)"}];let r,c,a;for(const i of l)if(e.src.startsWith(i.open,e.pos)){const n=e.pos+i.open.length;for(r=n;(r=e.src.indexOf(i.close,r))!==-1;){for(a=r-1;e.src[a]==="\\";)a-=1;if((r-a)%2===1)break;r+=i.close.length}if(r===-1)return t||(e.pending+=i.open),e.pos=n,!0;if(r-n===0)return t||(e.pending+=i.open+i.close),e.pos=n+i.close.length,!0;if(!t){const h=e.src.slice(n,r);c=e.push("math_inline","math",0),c.markup=i.open,c.content=h}return e.pos=r+i.close.length,!0}return!1},sr=(e,t,l,r)=>{const c=[{open:"$$",close:"$$"},{open:"\\[",close:"\\]"}];let a,i,n,h,g=!1,p=e.bMarks[t]+e.tShift[t],m=e.eMarks[t];for(const u of c)if(e.src.slice(p,p+u.open.length)===u.open&&e.src.slice(m-u.close.length,m)===u.close){if(p+=u.open.length,a=e.src.slice(p,m),r)return!0;for(a.trim().slice(-u.close.length)===u.close&&(a=a.trim().slice(0,-u.close.length),g=!0),n=t;!g&&(n++,!(n>=l||(p=e.bMarks[n]+e.tShift[n],m=e.eMarks[n],p<m&&e.tShift[n]<e.blkIndent)));)e.src.slice(p,m).trim().slice(-u.close.length)===u.close&&(h=e.src.slice(0,m).lastIndexOf(u.close),i=e.src.slice(p,h),g=!0);e.line=n+1;const k=e.push("math_block","math",0);return k.block=!0,k.content=(a&&a.trim()?a+`
`:"")+e.getLines(t+1,n,e.tShift[t],!0)+(i&&i.trim()?i:""),k.map=[t,e.line],k.markup=u.open,!0}return!1},ir=(e,{katexRef:t})=>{const l=(c,a,i,n,h)=>{const g=c[a],p={attrs:ft(g,[["class",`${o.p}-katex-inline`]])};if(t.current){const m=t.current.renderToString(g.content,o.d.katexConfig({throwOnError:!1}));return`<span ${h.renderAttrs(p)} data-processed>${m}</span>`}else return`<span ${h.renderAttrs(p)}>${g.content}</span>`},r=(c,a,i,n,h)=>{const g=c[a],p={attrs:ft(g,[["class",`${o.p}-katex-block`]])};if(t.current){const m=t.current.renderToString(g.content,o.d.katexConfig({throwOnError:!1,displayMode:!0}));return`<p ${h.renderAttrs(p)} data-processed>${m}</p>`}else return`<p ${h.renderAttrs(p)}>${g.content}</p>`};e.inline.ruler.before("escape","math_inline",ar),e.block.ruler.after("blockquote","math_block",sr,{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.math_inline=l,e.renderer.rules.math_block=r},cr=(e,t)=>{t=t||{};const l=3,r=t.marker||"!",c=r.charCodeAt(0),a=r.length;let i="",n="";const h=(p,m,u,k,v)=>{const y=p[m];return y.type==="admonition_open"?p[m].attrPush(["class",`${o.p}-admonition ${o.p}-admonition-${y.info}`]):y.type==="admonition_title_open"&&p[m].attrPush(["class",`${o.p}-admonition-title`]),v.renderToken(p,m,u)},g=p=>{const m=p.trim().split(" ",2);n="",i=m[0],m.length>1&&(n=p.substring(i.length+2))};e.block.ruler.before("code","admonition",(p,m,u,k)=>{let v,y,$,f=!1,b=p.bMarks[m]+p.tShift[m],E=p.eMarks[m];if(c!==p.src.charCodeAt(b))return!1;for(v=b+1;v<=E&&r[(v-b)%a]===p.src[v];v++);const w=Math.floor((v-b)/a);if(w!==l)return!1;v-=(v-b)%a;const j=p.src.slice(b,v),A=p.src.slice(v,E);if(g(A),k)return!0;for(y=m;y++,!(y>=u||(b=p.bMarks[y]+p.tShift[y],E=p.eMarks[y],b<E&&p.sCount[y]<p.blkIndent));)if(c===p.src.charCodeAt(b)&&!(p.sCount[y]-p.blkIndent>=4)){for(v=b+1;v<=E&&r[(v-b)%a]===p.src[v];v++);if(!(Math.floor((v-b)/a)<w)&&(v-=(v-b)%a,v=p.skipSpaces(v),!(v<E))){f=!0;break}}const L=p.parentType,S=p.lineMax;return p.parentType="root",p.lineMax=y,$=p.push("admonition_open","div",1),$.markup=j,$.block=!0,$.info=i,$.map=[m,y],n&&($=p.push("admonition_title_open","p",1),$.markup=j+" "+i,$.map=[m,y],$=p.push("inline","",0),$.content=n,$.map=[m,p.line-1],$.children=[],$=p.push("admonition_title_close","p",-1),$.markup=j+" "+i),p.md.block.tokenize(p,m+1,y),$=p.push("admonition_close","div",-1),$.markup=p.src.slice(b,v),$.block=!0,p.parentType=L,p.lineMax=S,p.line=y+(f?1:0),!0},{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.admonition_open=h,e.renderer.rules.admonition_title_open=h,e.renderer.rules.admonition_title_close=h,e.renderer.rules.admonition_close=h},dr=(e,t)=>{e.renderer.rules.heading_open=(l,r)=>{var c;const a=l[r],i=((c=l[r+1].children)==null?void 0:c.reduce((h,g)=>h+(["text","code_inline","math_inline"].includes(g.type)&&g.content||""),""))||"",n=a.markup.length;return t.headsRef.current.push({text:i,level:n}),a.map&&a.level===0&&a.attrSet("id",t.mdHeadingId(i,n,t.headsRef.current.length)),e.renderer.renderToken(l,r,t)},e.renderer.rules.heading_close=(l,r,c,a,i)=>i.renderToken(l,r,c)},ur={copy:`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy ${o.p}-icon"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>`,"collapse-tips":`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left ${o.p}-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg>`},mr=(e,t)=>typeof t[e]=="string"?t[e]:ur[e],pr=(e,t)=>{const l=e.renderer.rules.fence,r=e.utils.unescapeAll,c=/\[(\w*)(?::([\w ]*))?\]/,a=/::(open|close)/,i=m=>m.info?r(m.info).trim():"",n=m=>{const u=i(m),[k=null,v=""]=(c.exec(u)||[]).slice(1);return[k,v]},h=m=>{const u=i(m);return u?u.split(/(\s+)/g)[0]:""},g=m=>{const u=m.info.match(a)||[],k=u[1]==="open"||u[1]!=="close"&&t.codeFoldable&&m.content.trim().split(`
`).length<t.autoFoldThreshold,v=u[1]||t.codeFoldable?"details":"div",y=u[1]||t.codeFoldable?"summary":"div";return{open:k,tagContainer:v,tagHeader:y}},p=(m,u,k,v,y)=>{if(m[u].hidden)return"";const $=t.usedLanguageTextRef.current.copyCode.text,f=t.customIconRef.current.copy||$,b=!!t.customIconRef.current.copy,E=`<span class="${o.p}-collapse-tips">${mr("collapse-tips",t.customIconRef.current)}</span>`,[w]=n(m[u]);if(w===null){const{open:X,tagContainer:Y,tagHeader:U}=g(m[u]),re=[["class",`${o.p}-code`]];X&&re.push(["open",""]);const ce={attrs:ft(m[u],re)};m[u].info=m[u].info.replace(a,"");const ne=l(m,u,k,v,y);return`
        <${Y} ${y.renderAttrs(ce)}>
          <${U} class="${o.p}-code-head">
            <div class="${o.p}-code-flag"><span></span><span></span><span></span></div>
            <div class="${o.p}-code-action">
              <span class="${o.p}-code-lang">${m[u].info.trim()}</span>
              <span class="${o.p}-copy-button" data-tips="${$}"${b?" data-is-icon=true":""}>${f}</span>
              ${Y==="details"?E:""}
            </div>
          </${U}>
          ${ne}
        </${Y}>
      `}let j,A,L,S,P="",F="",R="";const{open:O,tagContainer:z,tagHeader:q}=g(m[u]),J=[["class",`${o.p}-code`]];O&&J.push(["open",""]);const oe={attrs:ft(m[u],J)};for(let X=u;X<m.length&&(j=m[X],[A,L]=n(j),A===w);X++){j.info=j.info.replace(c,"").replace(a,""),j.hidden=!0;const Y=`${o.p}-codetab-${t.editorId}-${u}-${X-u}`;S=X-u>0?"":"checked",P+=`
        <li>
          <input
            type="radio"
            id="label-${o.p}-codetab-label-1-${t.editorId}-${u}-${X-u}"
            name="${o.p}-codetab-label-${t.editorId}-${u}"
            class="${Y}"
            ${S}
          >
          <label
            for="label-${o.p}-codetab-label-1-${t.editorId}-${u}-${X-u}"
            onclick="this.getRootNode().querySelectorAll('.${Y}').forEach(e => e.click())"
          >
            ${L||h(j)}
          </label>
        </li>`,F+=`
        <div role="tabpanel">
          <input
            type="radio"
            name="${o.p}-codetab-pre-${t.editorId}-${u}"
            class="${Y}"
            ${S}
            role="presentation">
          ${l(m,X,k,v,y)}
        </div>`,R+=`
        <input
          type="radio"
          name="${o.p}-codetab-lang-${t.editorId}-${u}"
          class="${Y}"
          ${S}
          role="presentation">
        <span class=${o.p}-code-lang role="note">${h(j)}</span>`}return`
      <${z} ${y.renderAttrs(oe)}>
        <${q} class="${o.p}-code-head">
          <div class="${o.p}-code-flag">
            <ul class="${o.p}-codetab-label" role="tablist">${P}</ul>
          </div>
          <div class="${o.p}-code-action">
            <span class="${o.p}-codetab-lang">${R}</span>
            <span class="${o.p}-copy-button" data-tips="${$}"${b?" data-is-icon=true":""}>${f}</span>
            ${z==="details"?E:""}
          </div>
        </${q}>
        ${F}
      </${z}>
    `};e.renderer.rules.fence=p,e.renderer.rules.code_block=p},Dt=(e,t,l)=>{const r=e.attrIndex(t),c=[t,l];r<0?e.attrPush(c):(e.attrs=e.attrs||[],e.attrs[r]=c)},hr=e=>e.type==="inline",fr=e=>e.type==="paragraph_open",gr=e=>e.type==="list_item_open",vr=e=>e.content.indexOf("[ ] ")===0||e.content.indexOf("[x] ")===0||e.content.indexOf("[X] ")===0,br=(e,t)=>hr(e[t])&&fr(e[t-1])&&gr(e[t-2])&&vr(e[t]),xr=(e,t)=>{const l=e[t].level-1;for(let r=t-1;r>=0;r--)if(e[r].level===l)return r;return-1},kr=e=>{const t=new e("html_inline","",0);return t.content="<label>",t},yr=e=>{const t=new e("html_inline","",0);return t.content="</label>",t},wr=(e,t,l)=>{const r=new l("html_inline","",0);return r.content='<label class="task-list-item-label" for="'+t+'">'+e+"</label>",r.attrs=[{for:t}],r},$r=(e,t,l)=>{const r=new t("html_inline","",0),c=l.enabled?" ":' disabled="" ';return e.content.indexOf("[ ] ")===0?r.content='<input class="task-list-item-checkbox"'+c+'type="checkbox">':(e.content.indexOf("[x] ")===0||e.content.indexOf("[X] ")===0)&&(r.content='<input class="task-list-item-checkbox" checked=""'+c+'type="checkbox">'),r},Cr=(e,t,l)=>{if(e.children=e.children||[],e.children.unshift($r(e,t,l)),e.children[1].content=e.children[1].content.slice(3),e.content=e.content.slice(3),l.label)if(l.labelAfter){e.children.pop();const r="task-item-"+Math.ceil(Math.random()*(1e4*1e3)-1e3);e.children[0].content=e.children[0].content.slice(0,-1)+' id="'+r+'">',e.children.push(wr(e.content,r,t))}else e.children.unshift(kr(t)),e.children.push(yr(t))},Tr=(e,t={})=>{e.core.ruler.after("inline","github-task-lists",l=>{const r=l.tokens;for(let c=2;c<r.length;c++)br(r,c)&&(Cr(r[c],l.Token,t),Dt(r[c-2],"class","task-list-item"+(t.enabled?" enabled":" ")),Dt(r[xr(r,c-2)],"class","contains-task-list"))})},Er=e=>{e.core.ruler.push("init-line-number",t=>(t.tokens.forEach(l=>{l.map&&(l.attrs||(l.attrs=[]),l.attrs.push(["data-line",l.map[0].toString()]))}),!0))},jr=(e,t)=>{const{modelValue:l,sanitize:r,mdHeadingId:c,codeFoldable:a,autoFoldThreshold:i,noKatex:n,noMermaid:h,noHighlight:g,setting:p,onHtmlChanged:m,onGetCatalog:u}=e,{editorConfig:k,markdownItConfig:v,markdownItPlugins:y}=o.d,{editorId:$,language:f,showCodeRowNumber:b,theme:E,usedLanguageText:w,customIcon:j,rootRef:A}=(0,s.useContext)(le),L=(0,s.useRef)([]),S=(0,s.useRef)(E);(0,s.useEffect)(()=>{S.current=E},[E]);const P=(0,s.useRef)(w);(0,s.useEffect)(()=>{P.current=w},[w]);const F=(0,s.useRef)(j);(0,s.useEffect)(()=>{F.current=j},[j]);const{hljsRef:R,hljsInited:O}=lr(e),{katexRef:z,katexInited:q}=rr(e),{reRender:J,replaceMermaid:oe}=or(e),[X]=(0,s.useState)(()=>{const K=(0,Mo.A)({html:!0,breaks:!0,linkify:!0});v(K,{editorId:$});const Pe=[{type:"image",plugin:Ro.A,options:{figcaption:!0,classes:"md-zoom"}},{type:"admonition",plugin:cr,options:{}},{type:"taskList",plugin:Tr,options:{}},{type:"heading",plugin:dr,options:{mdHeadingId:c,headsRef:L}},{type:"code",plugin:pr,options:{editorId:$,usedLanguageTextRef:P,codeFoldable:a,autoFoldThreshold:i,customIconRef:F}},{type:"sub",plugin:Ho.A,options:{}},{type:"sup",plugin:Do.A,options:{}}];n||Pe.push({type:"katex",plugin:ir,options:{katexRef:z}}),h||Pe.push({type:"mermaid",plugin:nr,options:{themeRef:S}}),y(Pe,{editorId:$}).forEach(ae=>{K.use(ae.plugin,ae.options)});const De=K.options.highlight;return K.set({highlight:(ae,ye,Ge)=>{if(De){const ot=De(ae,ye,Ge);if(ot)return ot}let $e;!g&&R.current?R.current.getLanguage(ye)?$e=R.current.highlight(ae,{language:ye,ignoreIllegals:!0}).value:$e=R.current.highlightAuto(ae).value:$e=X.utils.escapeHtml(ae);const vt=b?So($e.replace(/^\n+|\n+$/g,""),ae.replace(/^\n+|\n+$/g,"")):`<span class="${o.p}-code-block">${$e.replace(/^\n+|\n+$/g,"")}</span>`;return`<pre><code class="language-${ye}" language=${ye}>${vt}</code></pre>`}}),Er(K),K}),[Y,U]=(0,s.useState)(`_article-key_${(0,He.zE)()}`),[re,ce]=(0,s.useState)(()=>(L.current=[],r(X.render(l)))),ne=(0,s.useMemo)(()=>(g||O)&&(n||q),[O,q,g,n]),Q=(0,s.useRef)(!0),te=(0,s.useCallback)(()=>{L.current=[];const K=r(X.render(l));ce(K)},[X,l,r]);return(0,s.useEffect)(()=>{C.emit($,ze,re),m==null||m(re),u==null||u(L.current),C.emit($,Re,L.current)},[$,re,Y,u,m]),(0,s.useEffect)(()=>{p.preview&&(oe().then(()=>{var K;Lt((K=A==null?void 0:A.current)==null?void 0:K.querySelectorAll(`#${$} .${o.p}-mermaid`))}),C.emit($,Re,L.current))},[$,oe,A,p.preview]),(0,s.useEffect)(()=>{if(Q.current){Q.current=!1;return}const K=setTimeout(()=>{te()},t?0:k.renderDelay);return()=>{clearTimeout(K)}},[ne,E,te,f,t,k.renderDelay]),(0,s.useEffect)(()=>{oe().then(()=>{var K;Lt((K=A==null?void 0:A.current)==null?void 0:K.querySelectorAll(`#${$} .${o.p}-mermaid`))})},[$,re,Y,J,oe,A]),(0,s.useEffect)(()=>{const K=()=>{C.emit($,Re,L.current)};return C.on($,{name:_,callback:K}),()=>{C.remove($,_,K)}},[$]),(0,s.useEffect)(()=>{const K=()=>{U(`_article-key_${(0,He.zE)()}`),te()};return C.on($,{name:se,callback:K}),()=>{C.remove($,se,K)}},[$,te]),{html:re,key:Y}},Bt={checked:{regexp:/- \[x\]/,value:"- [ ]"},unChecked:{regexp:/- \[\s\]/,value:"- [x]"}},Ar=(e,t)=>{const{editorId:l,rootRef:r}=(0,s.useContext)(le);(0,s.useEffect)(()=>{var c;const a=((c=r.current)==null?void 0:c.querySelectorAll(".task-list-item.enabled"))||[],i=n=>{var h;n.preventDefault();const g=n.target.checked?"unChecked":"checked",p=(h=n.target.parentElement)==null?void 0:h.dataset.line;if(!p)return;const m=Number(p),u=e.modelValue.split(`
`),k=u[Number(m)].replace(Bt[g].regexp,Bt[g].value);e.previewOnly?(u[Number(m)]=k,e.onChange(u.join(`
`))):C.emit(l,yt,m+1,k)};return a.forEach(n=>{n.addEventListener("click",i)}),()=>{a.forEach(n=>{n.removeEventListener("click",i)})}},[l,t,e,r])},Nr=e=>{const{previewOnly:t=!1}=e,{editorId:l,previewTheme:r,showCodeRowNumber:c}=(0,s.useContext)(le),{html:a,key:i}=jr(e,!!t);tr(e,a,i),er(e,a),Ar(e,a);const n=(0,s.useMemo)(()=>(0,d.jsx)("div",{id:`${l}-preview`,className:M([`${o.p}-preview`,`${r}-theme`,c&&`${o.p}-scrn`]),dangerouslySetInnerHTML:{__html:a}},i),[l,a,i,r,c]);return(0,d.jsxs)(d.Fragment,{children:[e.setting.preview&&(0,d.jsx)("div",{id:`${l}-preview-wrapper`,className:`${o.p}-preview-wrapper`,children:n},"content-preview-wrapper"),!t&&e.setting.htmlPreview&&(0,d.jsx)("div",{id:`${l}-html-wrapper`,className:`${o.p}-preview-wrapper`,children:(0,d.jsx)("div",{className:`${o.p}-html`,children:a})},"html-preview-wrapper")]})};var Ir=Object.defineProperty,Sr=Object.defineProperties,Pr=Object.getOwnPropertyDescriptors,zt=Object.getOwnPropertySymbols,Lr=Object.prototype.hasOwnProperty,Fr=Object.prototype.propertyIsEnumerable,Vt=(e,t,l)=>t in e?Ir(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,wt=(e,t)=>{for(var l in t||(t={}))Lr.call(t,l)&&Vt(e,l,t[l]);if(zt)for(var l of zt(t))Fr.call(t,l)&&Vt(e,l,t[l]);return e},$t=(e,t)=>Sr(e,Pr(t));const Wt=`${o.p}-dropdown-hidden`,Ye=e=>{const{relative:t="html",onChange:l,disabled:r}=e,[c,a]=(0,s.useState)({overlayClass:Wt,overlayStyle:{}}),i=(0,s.useRef)({triggerHover:!1,overlayHover:!1}),n=(0,s.useRef)(null),h=(0,s.useRef)(null),g=(0,s.useCallback)(()=>{var f,b;if(r)return!1;i.current.triggerHover=!0;const E=n.current,w=h.current;if(!E||!w)return;const j=E.getBoundingClientRect(),A=E.offsetTop,L=E.offsetLeft,S=j.height,P=j.width,F=E.getRootNode(),R=((f=F.querySelector(t))==null?void 0:f.scrollLeft)||0,O=((b=F.querySelector(t))==null?void 0:b.clientWidth)||0;let z=L-w.offsetWidth/2+P/2-R;z+w.offsetWidth>R+O&&(z=R+O-w.offsetWidth),z<0&&(z=0),a(q=>$t(wt({},q),{overlayStyle:{top:A+S+"px",left:z+"px"}})),l(!0)},[r,l,t]),p=(0,s.useCallback)(()=>{if(r)return!1;i.current.overlayHover=!0},[r]),m=(0,s.useRef)(-1),u=(0,s.useCallback)(f=>{var b;if(r)return!1;(b=n.current)!=null&&b.contains(f.target)?i.current.triggerHover=!1:i.current.overlayHover=!1,clearTimeout(m.current),m.current=window.setTimeout(()=>{!i.current.overlayHover&&!i.current.triggerHover&&l(!1)},10)},[r,l]),k=e.children,v=e.overlay,y=(0,s.cloneElement)(k,{ref:n,key:"cloned-dropdown-trigger"});(0,s.useEffect)(()=>{e.visible?a(f=>$t(wt({},f),{overlayClass:""})):a(f=>$t(wt({},f),{overlayClass:Wt}))},[e.visible]),(0,s.useEffect)(()=>{const f=n.current,b=h.current;return f==null||f.addEventListener("mouseenter",g),f==null||f.addEventListener("mouseleave",u),b==null||b.addEventListener("mouseenter",p),b==null||b.addEventListener("mouseleave",u),()=>{f==null||f.removeEventListener("mouseenter",g),f==null||f.removeEventListener("mouseleave",u),b==null||b.removeEventListener("mouseenter",p),b==null||b.removeEventListener("mouseleave",u)}},[u,p,g]);const $=(0,d.jsx)("div",{className:`${o.p}-dropdown ${c.overlayClass}`,style:c.overlayStyle,ref:h,children:(0,d.jsx)("div",{className:`${o.p}-dropdown-overlay`,children:v instanceof Array?v[0]:v})});return(0,d.jsxs)(d.Fragment,{children:[y,$]})};var Or=N(42189),Mr=N(45274),Rr=N(99445),Hr=N(2469),Dr=N(48606),Br=N(39143),zr=N(72908),Vr=N(98317),Wr=N(67837),Ur=N(47773),Gr=N(87025),_r=N(36270),Kr=N(92752),Ut=N(1790),Xr=N(85681),Zr=N(39656),qr=N(26453),Qr=N(19309),Yr=N(47728),Jr=N(30112),en=N(21826),tn=N(86152),ln=N(36684),on=N(47733),rn=N(11780),nn=N(19532),an=N(87060),sn=N(17678),cn=N(81675),dn=N(32488),un=N(42701),mn=N(26872),pn=N(31803),hn=Object.defineProperty,fn=Object.defineProperties,gn=Object.getOwnPropertyDescriptors,Gt=Object.getOwnPropertySymbols,vn=Object.prototype.hasOwnProperty,bn=Object.prototype.propertyIsEnumerable,_t=(e,t,l)=>t in e?hn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,je=(e,t)=>{for(var l in t||(t={}))vn.call(t,l)&&_t(e,l,t[l]);if(Gt)for(var l of Gt(t))bn.call(t,l)&&_t(e,l,t[l]);return e},Je=(e,t)=>fn(e,gn(t));const xn=e=>(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`lucide lucide-github-icon ${e.className}`,children:[(0,d.jsx)("path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"}),(0,d.jsx)("path",{d:"M9 18c-4.51 2-5-2-7-2"})]}),kn={bold:Mr.A,underline:Rr.A,italic:Hr.A,"strike-through":Dr.A,title:Br.A,sub:zr.A,sup:Vr.A,quote:Wr.A,"unordered-list":Ur.A,"ordered-list":Gr.A,task:_r.A,"code-row":Kr.A,code:Ut.A,link:Xr.A,image:Zr.A,table:qr.A,revoke:Qr.A,next:Yr.A,save:Jr.A,prettier:Ut.A,minimize:en.A,maximize:tn.A,"fullscreen-exit":ln.A,fullscreen:on.A,"preview-only":rn.A,preview:nn.A,"preview-html":an.A,catalog:sn.A,github:xn,mermaid:cn.A,formula:dn.A,close:un.A,delete:mn.A,upload:pn.A},yn=e=>(0,s.createElement)(kn[e.name],{className:`${o.p}-icon`}),B=e=>{const{customIcon:t}=(0,s.useContext)(le),l=t[e.name];if(typeof l=="object"){const r=l.component;return typeof r=="function"?(0,d.jsx)(r,je({},l.props)):(0,d.jsx)("span",{dangerouslySetInnerHTML:{__html:l.component}})}return(0,d.jsx)(yn,{name:e.name})},wn=`${o.p}-modal-container`,Kt=e=>{const{theme:t,rootRef:l}=(0,s.useContext)(le),{onClose:r=()=>{},onAdjust:c=()=>{},style:a={},showMask:i=!0}=e,[n,h]=(0,s.useState)(e.visible),[g,p]=(0,s.useState)([`${o.p}-modal`]),m=(0,s.useRef)(null),u=(0,s.useRef)(null),k=(0,s.useRef)(),v=(0,s.useRef)(null),[y,$]=(0,s.useState)({maskStyle:{zIndex:-1},modalStyle:{zIndex:-1},initPos:{left:"0px",top:"0px"},historyPos:{left:"0px",top:"0px"}}),f=(0,s.useMemo)(()=>e.isFullscreen?{width:"100%",height:"100%"}:{width:e.width,height:e.height},[e.height,e.isFullscreen,e.width]);return(0,s.useEffect)(()=>{var b;const E=(b=l.current)==null?void 0:b.getRootNode();return k.current=E instanceof Document?document.body:E,()=>{k.current=void 0}},[l]),(0,s.useEffect)(()=>{let b=()=>{};return!e.isFullscreen&&e.visible&&(b=jo(u.current,(E,w)=>{$(j=>Je(je({},j),{initPos:{left:E+"px",top:w+"px"}}))})),b},[e.isFullscreen,e.visible]),(0,s.useEffect)(()=>{if(n){const b=m.current.offsetWidth/2,E=m.current.offsetHeight/2,w=document.documentElement.clientWidth/2,j=document.documentElement.clientHeight/2;$(A=>Je(je({},A),{maskStyle:{zIndex:o.d.editorConfig.zIndex+Ft()},modalStyle:{zIndex:o.d.editorConfig.zIndex+Ft()},initPos:{left:w-b+"px",top:j-E+"px"}}))}},[n]),(0,s.useEffect)(()=>{const b=e.visible;b?(p(()=>[`${o.p}-modal`,"zoom-in"]),h(b)):(p(()=>[`${o.p}-modal`,"zoom-out"]),setTimeout(()=>{h(b)},150))},[e.visible]),(0,d.jsx)(d.Fragment,{children:k.current&&(0,Or.createPortal)((0,d.jsx)("div",{ref:v,className:wn,"data-theme":t,children:(0,d.jsxs)("div",{className:e.className,style:Je(je({},a),{display:n?"block":"none"}),children:[i&&(0,d.jsx)("div",{className:`${o.p}-modal-mask`,style:y.maskStyle,onClick:r}),(0,d.jsxs)("div",{className:g.join(" "),style:je(je(je({},y.modalStyle),y.initPos),f),ref:m,children:[(0,d.jsx)("div",{className:`${o.p}-modal-header`,ref:u,children:e.title||""}),(0,d.jsxs)("div",{className:`${o.p}-modal-func`,children:[e.showAdjust&&(0,d.jsx)("div",{className:`${o.p}-modal-adjust`,onClick:b=>{b.stopPropagation(),e.isFullscreen?$(E=>Je(je({},E),{initPos:E.historyPos})):$(E=>Je(je({},E),{historyPos:E.initPos,initPos:{left:"0",top:"0"}})),c instanceof Function&&c(!e.isFullscreen)},children:(0,d.jsx)(B,{name:e.isFullscreen?"minimize":"maximize"})}),(0,d.jsx)("div",{className:`${o.p}-modal-close`,onClick:b=>{b.stopPropagation(),e.onClose&&e.onClose()},children:(0,d.jsx)(B,{name:"close"})})]}),(0,d.jsx)("div",{className:`${o.p}-modal-body`,children:e.children})]})]})}),k.current)})},$n=`.${o.p}-preview > [data-line]`,We=(e,t)=>+getComputedStyle(e).getPropertyValue(t).replace("px",""),Cn=(e,t)=>{const l=(0,He.sg)(()=>{e.removeEventListener("scroll",r),e.addEventListener("scroll",r),t.removeEventListener("scroll",r),t.addEventListener("scroll",r)},50),r=c=>{const a=e.clientHeight,i=t.clientHeight,n=e.scrollHeight,h=t.scrollHeight,g=(n-a)/(h-i);c.target===e?(t.removeEventListener("scroll",r),t.scrollTo({top:e.scrollTop/g}),l()):(e.removeEventListener("scroll",r),e.scrollTo({top:t.scrollTop*g}),l())};return[()=>{l().finally(()=>{e.dispatchEvent(new Event("scroll"))})},()=>{e.removeEventListener("scroll",r),t.removeEventListener("scroll",r)}]},Tn=(e,t,l)=>{const{view:r}=l,c=(0,He.Uw)(),a=f=>r.lineBlockAt(r.state.doc.line(f+1).from).top,i=f=>r.lineBlockAt(r.state.doc.line(f+1).from).bottom;let n=[],h=[],g=[];const p=()=>{n=[],h=Array.from(t.querySelectorAll($n)),g=h.map(j=>Number(j.dataset.line));const f=[...g],{lines:b}=r.state.doc;let E=f.shift()||0,w=f.shift()||b;for(let j=0;j<b;j++)j===w&&(E=j,w=f.shift()||b),n.push({start:E,end:w-1})},m=(f,b)=>{let E=1;for(let w=h.length-1;w-1>=0;w--){const j=h[w],A=h[w-1];if(j.offsetTop+j.offsetHeight>b&&A.offsetTop<b){E=Number(A.dataset.line);break}}for(let w=n.length-1;w>=0;w--){const j=i(n[w].end),A=a(n[w].start);if(j>f&&A<=f){E=E<n[w].start?E:n[w].start;break}}return E};let u=0,k=0;const v=()=>{var f,b,E;if(k!==0)return!1;u++;const{scrollDOM:w,contentHeight:j}=r;let A=We(t,"padding-top");const L=r.lineBlockAtHeight(w.scrollTop),{number:S}=r.state.doc.lineAt(L.from),P=n[S-1];if(!P)return!1;let F=1;const R=t.querySelector(`[data-line="${P.start}"]`)||((f=t.firstElementChild)==null?void 0:f.firstElementChild),O=t.querySelector(`[data-line="${P.end+1}"]`)||((b=t.lastElementChild)==null?void 0:b.lastElementChild),z=w.scrollHeight-w.clientHeight,q=t.scrollHeight-t.clientHeight;let J=a(P.start),oe=i(P.end),X=R.offsetTop,Y=O.offsetTop-X;J===0&&(X=0,R===O?(A=0,oe=j-w.offsetHeight,Y=q):Y=O.offsetTop),F=(w.scrollTop-J)/(oe-J);const U=O==((E=t.lastElementChild)==null?void 0:E.lastElementChild)?O.offsetTop+O.clientHeight:O.offsetTop;if(oe>=z||U>q){const ce=m(z,q);J=a(ce),F=(w.scrollTop-J)/(z-J);const ne=t.querySelector(`[data-line="${ce}"]`);J>0&&ne&&(X=ne.offsetTop),Y=q-X+We(t,"padding-top")}const re=X-A+Y*F;c(t,re,()=>{u--})},y=()=>{var f,b,E,w,j,A;if(u!==0)return;k++;const{scrollDOM:L}=r,S=t.scrollTop,P=t.scrollHeight,F=L.scrollHeight-L.clientHeight,R=t.scrollHeight-t.clientHeight;let O=(f=t.firstElementChild)==null?void 0:f.firstElementChild,z=(b=t.firstElementChild)==null?void 0:b.lastElementChild;if(g.length>0){let ne=Math.ceil(g[g.length-1]*(S/P)),Q=g.findLastIndex(te=>te<=ne);Q=Q===-1?0:Q,ne=g[Q];for(let te=Q;te>=0&&te<g.length;)if(h[te].offsetTop>S){if(te-1>=0){te--;continue}ne=-1,Q=te;break}else{if(te+1<g.length&&h[te+1].offsetTop<S){te++;continue}ne=g[te],Q=te;break}switch(Q){case-1:{O=(E=t.firstElementChild)==null?void 0:E.firstElementChild,z=h[Q];break}case g.length-1:{O=h[Q],z=(w=t.firstElementChild)==null?void 0:w.lastElementChild;break}default:O=h[Q],z=h[Q+1===h.length?Q:Q+1]}}let q=O===((j=t.firstElementChild)==null?void 0:j.firstElementChild)?0:O.offsetTop-We(O,"margin-top"),J=z.offsetTop,oe=0;const{start:X,end:Y}=n[Number(O.dataset.line||0)];let U=a(X);const re=a(Y+1===r.state.doc.lines?Y:Y+1);let ce=0;if(re>F||z.offsetTop+z.offsetHeight>R){const ne=m(F,R),Q=t.querySelector(`[data-line="${ne}"]`);q=Q?Q.offsetTop-We(Q,"margin-top"):q,U=a(ne),oe=(S-q)/(R-q),ce=F-U}else O===((A=t.firstElementChild)==null?void 0:A.firstElementChild)?(O===z&&(J=z.offsetTop+z.offsetHeight+ +getComputedStyle(z).marginBottom.replace("px","")),ce=re,oe=Math.max(S/J,0)):(oe=Math.max((S-q)/(J-q),0),ce=re-U);c(e,U+ce*oe,()=>{k--})},$=f=>{var b;const{scrollDOM:E,contentHeight:w}=r,j=E.clientHeight;if(w<=j||t.firstElementChild.clientHeight<=t.clientHeight||r.state.doc.lines<=((b=n[n.length-1])==null?void 0:b.end))return!1;f.target===e?v():y()};return[()=>{p(),e.addEventListener("scroll",$),t.addEventListener("scroll",$),e.dispatchEvent(new Event("scroll"))},()=>{e.removeEventListener("scroll",$),t.removeEventListener("scroll",$)}]},Xt=(0,s.createContext)({scrollElementRef:void 0,rootNodeRef:void 0}),Zt=({tocItem:e,mdHeadingId:t,onActive:l,onClick:r,scrollElementOffsetTop:c=0})=>{const{scrollElementRef:a,rootNodeRef:i}=(0,s.useContext)(Xt),n=(0,s.useRef)(null);return(0,s.useEffect)(()=>{e.active&&l(e,n.current)},[l,e,e.active]),(0,d.jsxs)("div",{ref:n,className:M([`${o.p}-catalog-link`,e.active&&`${o.p}-catalog-active`]),onClick:h=>{r==null||r(h,e),h.stopPropagation();const g=t(e.text,e.level,e.index),p=i==null?void 0:i.current.getElementById(g),m=a==null?void 0:a.current;if(p&&m){let u=p.offsetParent,k=p.offsetTop;if(m.contains(u))for(;u&&m!=u;)k+=u==null?void 0:u.offsetTop,u=u==null?void 0:u.offsetParent;const v=p.previousElementSibling;let y=0;v||(y=We(p,"margin-top")),m==null||m.scrollTo({top:k-c-y,behavior:"smooth"})}},children:[(0,d.jsx)("span",{title:e.text,children:e.text}),e.children&&e.children.length>0&&(0,d.jsx)("div",{className:`${o.p}-catalog-wrapper`,children:e.children.map(h=>(0,d.jsx)(Zt,{mdHeadingId:t,tocItem:h,onActive:l,onClick:r,scrollElementOffsetTop:c},`${e.text}-link-${h.level}-${h.text}`))})]})},En=e=>{const{editorId:t,mdHeadingId:l=o.f.mdHeadingId,theme:r="light",offsetTop:c=20}=e,a=(0,s.useMemo)(()=>`#${t}-preview-wrapper`,[t]),[i,n]=(0,s.useState)([]),[h,g]=(0,s.useState)(),p=(0,s.useRef)(null),m=(0,s.useRef)(),u=(0,s.useRef)(),k=(0,s.useRef)(),[v,y]=(0,s.useState)({}),$=(0,s.useMemo)(()=>{const w=[];return i.forEach((j,A)=>{const{text:L,level:S}=j,P={level:S,text:L,index:A+1,active:h===j};if(w.length===0)w.push(P);else{let F=w[w.length-1];if(P.level>F.level)for(let R=F.level+1;R<=6;R++){const{children:O}=F;if(!O){F.children=[P];break}if(F=O[O.length-1],P.level<=F.level){O.push(P);break}}else w.push(P)}}),w},[h,i]),[f]=(0,s.useState)(()=>e.scrollElement||`#${t}-preview-wrapper`),b=(0,s.useCallback)(()=>{var w;if(f instanceof HTMLElement)return f;let j=document;return(f===a||e.isScrollElementInShadow)&&(j=(w=p.current)==null?void 0:w.getRootNode()),j.querySelector(f)},[a,e.isScrollElementInShadow,f]),E=(0,s.useCallback)((w,j)=>{var A;y({top:j.offsetTop+We(j,"padding-top")+"px"}),(A=e.onActive)==null||A.call(e,w,j)},[e]);return(0,s.useEffect)(()=>{k.current=p.current.getRootNode()},[]),(0,s.useEffect)(()=>{let w=[];const j=S=>{if(S.length===0)return g(void 0),n([]),w=S,!1;const{activeHead:P}=S.reduce((F,R,O)=>{var z;const q=(z=k.current)==null?void 0:z.getElementById(l(R.text,R.level,O+1));if(q instanceof HTMLElement){const J=Po(q,m.current);if(J<c&&J>F.minTop)return{activeHead:R,minTop:J}}return F},{activeHead:S[0],minTop:Number.MIN_SAFE_INTEGER});g(P),n(S),w=S},A=()=>{j(w)},L=S=>{var P,F;const R=b();m.current=R,u.current=R===document.documentElement?document:R,(P=u.current)==null||P.removeEventListener("scroll",A),j(S),(F=u.current)==null||F.addEventListener("scroll",A)};return C.on(t,{name:Re,callback:L}),C.emit(t,_),()=>{var S;C.remove(t,Re,L),(S=u.current)==null||S.removeEventListener("scroll",A)}},[c,l,b,t]),(0,d.jsx)(Xt.Provider,{value:{scrollElementRef:m,rootNodeRef:k},children:(0,d.jsx)("div",{className:M([`${o.p}-catalog`,r==="dark"&&`${o.p}-catalog-dark`,e.className||""]),style:e.style,ref:p,children:$.length>0&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:`${o.p}-catalog-indicator`,style:v}),(0,d.jsx)("div",{className:`${o.p}-catalog-container`,children:$.map(w=>(0,d.jsx)(Zt,{mdHeadingId:l,tocItem:w,onActive:E,onClick:e.onClick,scrollElementOffsetTop:e.scrollElementOffsetTop},`link-${w.level}-${w.text}`))})]})})})},jn=(0,s.memo)(En);var fe=N(94192),An=N(76156),Nn=N(59781),ie=N(44948),Ne=N(74109),et=N(23645),T=N(27551),In=N(99479),Sn=N(75511),Pn=Object.defineProperty,Ln=Object.defineProperties,Fn=Object.getOwnPropertyDescriptors,qt=Object.getOwnPropertySymbols,On=Object.prototype.hasOwnProperty,Mn=Object.prototype.propertyIsEnumerable,Qt=(e,t,l)=>t in e?Pn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,H=(e,t)=>{for(var l in t||(t={}))On.call(t,l)&&Qt(e,l,t[l]);if(qt)for(var l of qt(t))Mn.call(t,l)&&Qt(e,l,t[l]);return e},V=(e,t)=>Ln(e,Fn(t)),Ct=(e,t,l)=>new Promise((r,c)=>{var a=h=>{try{n(l.next(h))}catch(g){c(g)}},i=h=>{try{n(l.throw(h))}catch(g){c(g)}},n=h=>h.done?r(h.value):Promise.resolve(h.value).then(a,i);n((l=l.apply(e,t)).next())}),Rn=Object.defineProperty,Hn=(e,t,l)=>t in e?Rn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,Ie=(e,t,l)=>Hn(e,typeof t!="symbol"?t+"":t,l);const Dn=()=>(0,d.jsx)("div",{className:`${o.p}-divider`}),Bn=e=>{var t,l,r,c,a;const{editorId:i,usedLanguageText:n}=(0,s.useContext)(le),h=(0,s.useMemo)(()=>{var m,u;switch(e.type){case"link":return(m=n.linkModalTips)==null?void 0:m.linkTitle;case"image":return(u=n.linkModalTips)==null?void 0:u.imageTitle;default:return""}},[e.type,n]),[g,p]=(0,s.useState)({desc:"",url:""});return(0,s.useEffect)(()=>{e.visible||setTimeout(()=>{p({desc:"",url:""})},200)},[e.visible]),(0,s.useMemo)(()=>{var m,u,k,v,y;return(0,d.jsxs)(Kt,{title:h,visible:e.visible,onClose:e.onCancel,children:[(0,d.jsxs)("div",{className:`${o.p}-form-item`,children:[(0,d.jsx)("label",{className:`${o.p}-label`,htmlFor:`link-desc-${i}`,children:(m=n.linkModalTips)==null?void 0:m.descLabel}),(0,d.jsx)("input",{placeholder:(u=n.linkModalTips)==null?void 0:u.descLabelPlaceHolder,className:`${o.p}-input`,id:`link-desc-${i}`,type:"text",value:g.desc,onChange:$=>{p(f=>V(H({},f),{desc:$.target.value}))}})]}),(0,d.jsxs)("div",{className:`${o.p}-form-item`,children:[(0,d.jsx)("label",{className:`${o.p}-label`,htmlFor:`link-url-${i}`,children:(k=n.linkModalTips)==null?void 0:k.urlLabel}),(0,d.jsx)("input",{placeholder:(v=n.linkModalTips)==null?void 0:v.urlLabelPlaceHolder,className:`${o.p}-input`,id:`link-url-${i}`,type:"text",value:g.url,onChange:$=>{p(f=>V(H({},f),{url:$.target.value}))}})]}),(0,d.jsx)("div",{className:`${o.p}-form-item`,children:(0,d.jsx)("button",{className:`${o.p}-btn ${o.p}-btn-row`,type:"button",onClick:()=>{e.onOk(g),p($=>V(H({},$),{desc:"",url:""}))},children:(y=n.linkModalTips)==null?void 0:y.buttonOK})})]})},[h,e,i,(t=n.linkModalTips)==null?void 0:t.descLabel,(l=n.linkModalTips)==null?void 0:l.descLabelPlaceHolder,(r=n.linkModalTips)==null?void 0:r.urlLabel,(c=n.linkModalTips)==null?void 0:c.urlLabelPlaceHolder,(a=n.linkModalTips)==null?void 0:a.buttonOK,g])};let Se=null;const zn=e=>{var t,l,r;const c=(0,s.useContext)(le),{editorId:a,usedLanguageText:i,rootRef:n}=c,h=o.d.editorExtensions.cropper.instance,g=(0,s.useRef)(null),p=(0,s.useRef)(null),m=(0,s.useRef)(null),[u,k]=(0,s.useState)({cropperInited:!1,imgSelected:!1,imgSrc:"",isFullscreen:!1});(0,s.useEffect)(()=>{e.visible&&!u.cropperInited&&(window.Cropper=h||window.Cropper,g.current.onchange=()=>{if(!window.Cropper){C.emit(a,be,{name:"Cropper",message:"Cropper is undefined"});return}const f=g.current.files||[];if((f==null?void 0:f.length)>0){const b=new FileReader;b.onload=E=>{k(w=>V(H({},w),{imgSelected:!0,imgSrc:E.target.result}))},b.readAsDataURL(f[0])}})},[e.visible,u.cropperInited,h,a]),(0,s.useEffect)(()=>{var f;(f=m.current)==null||f.setAttribute("style","")},[u.imgSelected]),(0,s.useEffect)(()=>{var f,b;Se==null||Se.destroy(),(f=m.current)==null||f.setAttribute("style",""),p.current&&u.imgSrc&&(Se=new window.Cropper(p.current,{viewMode:2,preview:((b=n.current)==null?void 0:b.getRootNode()).querySelector(`.${o.p}-clip-preview-target`)}))},[u.imgSrc,u.isFullscreen,n]);const v=(0,s.useMemo)(()=>u.isFullscreen?{width:"100%",height:"100%"}:{width:"668px",height:"392px"},[u.isFullscreen]),y=()=>{Se.clear(),Se.destroy(),Se=null,g.current.value="",k(f=>V(H({},f),{imgSrc:"",imgSelected:!1}))},$=(0,s.useCallback)(f=>{k(b=>V(H({},b),{isFullscreen:f}))},[]);return(0,s.useMemo)(()=>{var f,b,E;return(0,d.jsxs)(Kt,V(H({className:`${o.p}-modal-clip`,title:(f=i.clipModalTips)==null?void 0:f.title,visible:e.visible,onClose:e.onCancel,showAdjust:!0,isFullscreen:u.isFullscreen,onAdjust:$},v),{children:[(0,d.jsxs)("div",{className:`${o.p}-form-item ${o.p}-clip`,children:[(0,d.jsx)("div",{className:`${o.p}-clip-main`,children:u.imgSelected?(0,d.jsxs)("div",{className:`${o.p}-clip-cropper`,children:[(0,d.jsx)("img",{src:u.imgSrc,ref:p,style:{display:"none"},alt:""}),(0,d.jsx)("div",{className:`${o.p}-clip-delete`,onClick:y,children:(0,d.jsx)(B,{name:"delete"})})]}):(0,d.jsx)("div",{className:`${o.p}-clip-upload`,onClick:()=>{g.current.click()},role:"button",tabIndex:0,"aria-label":(b=i.imgTitleItem)==null?void 0:b.upload,children:(0,d.jsx)(B,{name:"upload"})})}),(0,d.jsx)("div",{className:`${o.p}-clip-preview`,children:(0,d.jsx)("div",{className:`${o.p}-clip-preview-target`,ref:m})})]}),(0,d.jsx)("div",{className:`${o.p}-form-item`,children:(0,d.jsx)("button",{className:`${o.p}-btn`,type:"button",onClick:()=>{if(Se){const w=Se.getCroppedCanvas();C.emit(a,Me,[Io(w.toDataURL("image/png"))],e.onOk),y()}},children:(E=i.linkModalTips)==null?void 0:E.buttonOK})}),(0,d.jsx)("input",{ref:g,accept:"image/*",type:"file",multiple:!1,style:{display:"none"},"aria-hidden":"true"})]}))},[(t=i.clipModalTips)==null?void 0:t.title,(l=i.linkModalTips)==null?void 0:l.buttonOK,(r=i.imgTitleItem)==null?void 0:r.upload,e.visible,e.onCancel,e.onOk,u.isFullscreen,u.imgSelected,u.imgSrc,$,v,a])},Vn=e=>(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(Bn,{type:e.type,visible:e.linkVisible,onOk:e.onOk,onCancel:e.onCancel}),(0,d.jsx)(zn,{visible:e.clipVisible,onOk:e.onOk,onCancel:e.onCancel})]}),Wn=e=>{const[t,l]=(0,s.useState)({x:-1,y:-1}),r=(0,s.useMemo)(()=>JSON.stringify(e.tableShape),[e.tableShape]),c=(0,s.useCallback)(()=>{const n=[...JSON.parse(r)];return(!n[2]||n[2]<n[0])&&(n[2]=n[0]),(!n[3]||n[3]<n[3])&&(n[3]=n[1]),n},[r]),[a,i]=(0,s.useState)(c);return(0,s.useEffect)(()=>{i(c),l({x:-1,y:-1})},[c]),(0,d.jsx)("div",{className:`${o.p}-table-shape`,onMouseLeave:()=>{i(c),l({x:-1,y:-1})},children:new Array(a[1]).fill("").map((n,h)=>(0,d.jsx)("div",{className:`${o.p}-table-shape-row`,children:new Array(a[0]).fill("").map((g,p)=>(0,d.jsx)("div",{className:`${o.p}-table-shape-col`,onMouseEnter:()=>{l({x:h,y:p}),p+1===a[0]&&p+1<a[2]?i(m=>{const u=[...m];return u[0]=m[0]+1,u}):p+2<a[0]&&a[0]>e.tableShape[0]&&i(m=>{const u=[...m];return u[0]=m[0]-1,u}),h+1===a[1]&&h+1<a[3]?i(m=>{const u=[...m];return u[1]=m[1]+1,u}):h+2<a[1]&&a[1]>e.tableShape[1]&&i(m=>{const u=[...m];return u[1]=m[1]-1,u})},onClick:()=>{e.onSelected(t)},children:(0,d.jsx)("div",{className:[`${o.p}-table-shape-col-default`,h<=t.x&&p<=t.y&&`${o.p}-table-shape-col-include`].filter(m=>!!m).join(" ")})},`table-shape-col-${p}`))},`table-shape-row-${h}`))})},Un=e=>{const{updateSetting:t}=e,{editorId:l}=(0,s.useContext)(le),r=(0,s.useRef)(o.d.editorExtensions.screenfull.instance),c=(0,s.useRef)(!1),a=(0,s.useCallback)(i=>{if(!r.current){C.emit(l,be,{name:"fullscreen",message:"fullscreen is undefined"});return}r.current.isEnabled?(c.current=!c.current,(i===void 0?!r.current.isFullscreen:i)?r.current.request():r.current.exit()):console.error("browser does not support screenfull!")},[l]);return(0,s.useEffect)(()=>{const i=()=>{t("fullscreen",c.current)};let n=-1;if(!r.current){const{editorExtensions:h,editorExtensionsAttrs:g}=o.d;n=requestAnimationFrame(()=>{var p;xe("script",V(H({},(p=g.screenfull)==null?void 0:p.js),{src:h.screenfull.js,id:ke.screenfull,onload(){r.current=window.screenfull,r.current&&r.current.isEnabled&&r.current.on("change",i)}}),"screenfull")})}return r.current&&r.current.isEnabled&&r.current.on("change",i),()=>{r.current||cancelAnimationFrame(n),r.current&&r.current.isEnabled&&r.current.off("change",i)}},[t]),(0,s.useEffect)(()=>(C.on(l,{name:Ke,callback:a}),()=>{C.remove(l,Ke,a)}),[l,a]),{fullscreenHandler:a}},Gn=(e,t)=>{const{editorId:l}=(0,s.useContext)(le),[r,c]=(0,s.useState)({type:"link",linkVisible:!1,clipVisible:!1}),a=(0,s.useCallback)(()=>{c(n=>V(H({},n),{linkVisible:!1,clipVisible:!1}))},[]),i=(0,s.useCallback)(n=>{n&&t(r.type,{desc:n.desc,url:n.url,transform:r.type==="image"}),a()},[t,r.type,a]);return(0,s.useEffect)(()=>{C.on(l,{name:qe,callback(h){c(g=>V(H({},g),{type:h,linkVisible:!0}))}});const n=()=>{C.emit(l,Me,Array.from(e.current.files||[])),e.current.value=""};e.current.addEventListener("change",n)},[l,e]),{modalData:r,setModalData:c,onCancel:a,onOk:i}},_n=e=>{const[t,l]=(0,s.useState)({title:!1,catalog:!1,image:!1,table:!1,mermaid:!1,katex:!1}),r=(0,s.useCallback)(k=>{l(v=>V(H({},v),{title:k}))},[]),c=(0,s.useCallback)(()=>{l(k=>V(H({},k),{title:!1}))},[]),a=(0,s.useCallback)(k=>{l(v=>V(H({},v),{image:k}))},[]),i=(0,s.useCallback)(()=>{l(k=>V(H({},k),{image:!1}))},[]),n=(0,s.useCallback)(k=>{l(v=>V(H({},v),{table:k}))},[]),h=(0,s.useCallback)(k=>{e("table",{selectedShape:k})},[e]),g=(0,s.useCallback)(k=>{l(v=>V(H({},v),{mermaid:k}))},[]),p=(0,s.useCallback)(()=>{l(k=>V(H({},k),{mermaid:!1}))},[]),m=(0,s.useCallback)(k=>{l(v=>V(H({},v),{katex:k}))},[]),u=(0,s.useCallback)(()=>{l(k=>V(H({},k),{katex:!1}))},[]);return{visible:t,onTitleChange:r,onTitleClose:c,onImageChange:a,onImageClose:i,onTableChange:n,onTableSelected:h,onMermaidChange:g,onMermaidClose:p,onKatexChange:m,onKatexClose:u}};let Kn=0;const Xn=e=>{var t,l,r,c,a,i,n,h,g,p,m,u,k,v,y,$,f,b,E,w,j,A,L,S,P,F,R,O,z,q,J,oe,X,Y,U,re,ce,ne,Q,te,K,Pe,De,ae,ye,Ge,$e,vt,ot,ml;const{toolbars:bt,toolbarsExclude:pl,updateSetting:rt,codeTheme:hl}=e,{editorId:Ae,usedLanguageText:Pa,theme:fl,previewTheme:gl,language:vl,disabled:I}=(0,s.useContext)(le),x=Pa,[ge]=(0,s.useState)(()=>`${Ae}-toolbar-wrapper`),At=(0,s.useRef)(null),Nt=(0,s.useRef)(null),D=(0,s.useCallback)((Z,ee)=>{if(I)return!1;C.emit(Ae,W,Z,ee)},[I,Ae]),{fullscreenHandler:bl}=Un(e),{modalData:nt,setModalData:_e,onCancel:La,onOk:Fa}=Gn(Nt,D),{visible:Ce,onTitleChange:xl,onTitleClose:kl,onImageChange:yl,onImageClose:wl,onTableChange:$l,onTableSelected:Cl,onMermaidChange:Tl,onMermaidClose:El,onKatexChange:jl,onKatexClose:Al}=_n(D),Nl=(0,s.useMemo)(()=>{var Z,ee,me,pe,de,ve,Le,Fe;return(0,d.jsx)(Ye,{relative:`#${ge}`,visible:Ce.title,onChange:xl,overlay:(0,d.jsxs)("ul",{className:`${o.p}-menu`,onClick:kl,role:"menu",children:[(0,d.jsx)("li",{className:`${o.p}-menu-item ${o.p}-menu-item-title`,onClick:()=>{D("h1")},role:"menuitem",tabIndex:0,children:(Z=x.titleItem)==null?void 0:Z.h1}),(0,d.jsx)("li",{className:`${o.p}-menu-item ${o.p}-menu-item-title`,onClick:()=>{D("h2")},role:"menuitem",tabIndex:0,children:(ee=x.titleItem)==null?void 0:ee.h2}),(0,d.jsx)("li",{className:`${o.p}-menu-item ${o.p}-menu-item-title`,onClick:()=>{D("h3")},role:"menuitem",tabIndex:0,children:(me=x.titleItem)==null?void 0:me.h3}),(0,d.jsx)("li",{className:`${o.p}-menu-item ${o.p}-menu-item-title`,onClick:()=>{D("h4")},role:"menuitem",tabIndex:0,children:(pe=x.titleItem)==null?void 0:pe.h4}),(0,d.jsx)("li",{className:`${o.p}-menu-item ${o.p}-menu-item-title`,onClick:()=>{D("h5")},role:"menuitem",tabIndex:0,children:(de=x.titleItem)==null?void 0:de.h5}),(0,d.jsx)("li",{className:`${o.p}-menu-item ${o.p}-menu-item-title`,onClick:()=>{D("h6")},role:"menuitem",tabIndex:0,children:(ve=x.titleItem)==null?void 0:ve.h6})]},"bar-title-overlay"),disabled:I,children:(0,d.jsxs)("div",{className:M([`${o.p}-toolbar-item`,I&&`${o.p}-disabled`]),title:(Le=x.toolbarTips)==null?void 0:Le.title,children:[(0,d.jsx)(B,{name:"title"}),e.showToolbarName&&(0,d.jsx)("div",{className:`${o.p}-toolbar-item-name`,children:(Fe=x.toolbarTips)==null?void 0:Fe.title})]},"bar-title-trigger")},"bar-title")},[ge,Ce.title,xl,kl,(t=x.titleItem)==null?void 0:t.h1,(l=x.titleItem)==null?void 0:l.h2,(r=x.titleItem)==null?void 0:r.h3,(c=x.titleItem)==null?void 0:c.h4,(a=x.titleItem)==null?void 0:a.h5,(i=x.titleItem)==null?void 0:i.h6,(n=x.toolbarTips)==null?void 0:n.title,I,e.showToolbarName,D]),Il=(0,s.useMemo)(()=>{var Z,ee,me,pe,de;return(0,d.jsx)(Ye,{relative:`#${ge}`,visible:Ce.image,onChange:yl,overlay:(0,d.jsxs)("ul",{className:`${o.p}-menu`,onClick:wl,role:"menu",children:[(0,d.jsx)("li",{className:`${o.p}-menu-item ${o.p}-menu-item-image`,onClick:()=>{_e(ve=>V(H({},ve),{type:"image",linkVisible:!0}))},role:"menuitem",tabIndex:0,children:(Z=x.imgTitleItem)==null?void 0:Z.link}),(0,d.jsx)("li",{className:`${o.p}-menu-item ${o.p}-menu-item-image`,onClick:()=>{Nt.current.click()},role:"menuitem",tabIndex:0,children:(ee=x.imgTitleItem)==null?void 0:ee.upload}),(0,d.jsx)("li",{className:`${o.p}-menu-item ${o.p}-menu-item-image`,onClick:()=>{_e(ve=>V(H({},ve),{type:"image",clipVisible:!0}))},role:"menuitem",tabIndex:0,children:(me=x.imgTitleItem)==null?void 0:me.clip2upload})]},"bar-image-overlay"),disabled:I,children:(0,d.jsxs)("div",{className:M([`${o.p}-toolbar-item`,I&&`${o.p}-disabled`]),title:(pe=x.toolbarTips)==null?void 0:pe.image,children:[(0,d.jsx)(B,{name:"image"}),e.showToolbarName&&(0,d.jsx)("div",{className:`${o.p}-toolbar-item-name`,children:(de=x.toolbarTips)==null?void 0:de.image})]},"bar-image-trigger")},"bar-image")},[ge,Ce.image,yl,wl,(h=x.imgTitleItem)==null?void 0:h.link,(g=x.imgTitleItem)==null?void 0:g.upload,(p=x.imgTitleItem)==null?void 0:p.clip2upload,(m=x.toolbarTips)==null?void 0:m.image,I,e.showToolbarName,_e]),Sl=(0,s.useMemo)(()=>{var Z,ee;return(0,d.jsx)(Ye,{relative:`#${ge}`,visible:Ce.table,onChange:$l,disabled:I,overlay:(0,d.jsx)(Wn,{tableShape:e.tableShape,onSelected:Cl},"bar-table-overlay"),children:(0,d.jsxs)("div",{className:M([`${o.p}-toolbar-item`,I&&`${o.p}-disabled`]),title:(Z=x.toolbarTips)==null?void 0:Z.table,children:[(0,d.jsx)(B,{name:"table"}),e.showToolbarName&&(0,d.jsx)("div",{className:`${o.p}-toolbar-item-name`,children:(ee=x.toolbarTips)==null?void 0:ee.table})]},"bar-table-trigger")},"bar-table")},[ge,Ce.table,$l,I,e.tableShape,e.showToolbarName,Cl,(u=x.toolbarTips)==null?void 0:u.table]),Pl=(0,s.useMemo)(()=>{var Z,ee,me,pe,de,ve,Le,Fe,at,st;return(0,d.jsx)(Ye,{relative:`#${ge}`,visible:Ce.mermaid,onChange:Tl,overlay:(0,d.jsxs)("ul",{className:`${o.p}-menu`,onClick:El,role:"menu",children:[(0,d.jsx)("li",{className:`${o.p}-menu-item ${o.p}-menu-item-mermaid`,onClick:()=>{D("flow")},role:"menuitem",tabIndex:0,children:(Z=x.mermaid)==null?void 0:Z.flow}),(0,d.jsx)("li",{className:`${o.p}-menu-item ${o.p}-menu-item-mermaid`,onClick:()=>{D("sequence")},role:"menuitem",tabIndex:0,children:(ee=x.mermaid)==null?void 0:ee.sequence}),(0,d.jsx)("li",{className:`${o.p}-menu-item ${o.p}-menu-item-mermaid`,onClick:()=>{D("gantt")},role:"menuitem",tabIndex:0,children:(me=x.mermaid)==null?void 0:me.gantt}),(0,d.jsx)("li",{className:`${o.p}-menu-item ${o.p}-menu-item-mermaid`,onClick:()=>{D("class")},role:"menuitem",tabIndex:0,children:(pe=x.mermaid)==null?void 0:pe.class}),(0,d.jsx)("li",{className:`${o.p}-menu-item ${o.p}-menu-item-mermaid`,onClick:()=>{D("state")},role:"menuitem",tabIndex:0,children:(de=x.mermaid)==null?void 0:de.state}),(0,d.jsx)("li",{className:`${o.p}-menu-item ${o.p}-menu-item-mermaid`,onClick:()=>{D("pie")},role:"menuitem",tabIndex:0,children:(ve=x.mermaid)==null?void 0:ve.pie}),(0,d.jsx)("li",{className:`${o.p}-menu-item ${o.p}-menu-item-mermaid`,onClick:()=>{D("relationship")},role:"menuitem",tabIndex:0,children:(Le=x.mermaid)==null?void 0:Le.relationship}),(0,d.jsx)("li",{className:`${o.p}-menu-item ${o.p}-menu-item-mermaid`,onClick:()=>{D("journey")},role:"menuitem",tabIndex:0,children:(Fe=x.mermaid)==null?void 0:Fe.journey})]},"bar-mermaid-overlay"),disabled:I,children:(0,d.jsxs)("div",{className:M([`${o.p}-toolbar-item`,I&&`${o.p}-disabled`]),title:(at=x.toolbarTips)==null?void 0:at.mermaid,children:[(0,d.jsx)(B,{name:"mermaid"}),e.showToolbarName&&(0,d.jsx)("div",{className:`${o.p}-toolbar-item-name`,children:(st=x.toolbarTips)==null?void 0:st.mermaid})]},"bar-mermaid-trigger")},"bar-mermaid")},[ge,Ce.mermaid,Tl,El,(k=x.mermaid)==null?void 0:k.flow,(v=x.mermaid)==null?void 0:v.sequence,(y=x.mermaid)==null?void 0:y.gantt,($=x.mermaid)==null?void 0:$.class,(f=x.mermaid)==null?void 0:f.state,(b=x.mermaid)==null?void 0:b.pie,(E=x.mermaid)==null?void 0:E.relationship,(w=x.mermaid)==null?void 0:w.journey,(j=x.toolbarTips)==null?void 0:j.mermaid,I,e.showToolbarName,D]),Ll=(0,s.useMemo)(()=>{var Z,ee,me,pe;return(0,d.jsx)(Ye,{relative:`#${ge}`,visible:Ce.katex,onChange:jl,overlay:(0,d.jsxs)("ul",{className:`${o.p}-menu`,onClick:Al,role:"menu",children:[(0,d.jsx)("li",{className:`${o.p}-menu-item ${o.p}-menu-item-katex`,onClick:()=>{D("katexInline")},role:"menuitem",tabIndex:0,children:(Z=x.katex)==null?void 0:Z.inline}),(0,d.jsx)("li",{className:`${o.p}-menu-item ${o.p}-menu-item-katex`,onClick:()=>{D("katexBlock")},role:"menuitem",tabIndex:0,children:(ee=x.katex)==null?void 0:ee.block})]},"bar-katex-overlay"),disabled:I,children:(0,d.jsxs)("div",{className:M([`${o.p}-toolbar-item`,I&&`${o.p}-disabled`]),title:(me=x.toolbarTips)==null?void 0:me.katex,children:[(0,d.jsx)(B,{name:"formula"}),e.showToolbarName&&(0,d.jsx)("div",{className:`${o.p}-toolbar-item-name`,children:(pe=x.toolbarTips)==null?void 0:pe.katex})]},"bar-katex-trigger")},"bar-katex")},[ge,Ce.katex,jl,Al,(A=x.katex)==null?void 0:A.inline,(L=x.katex)==null?void 0:L.block,(S=x.toolbarTips)==null?void 0:S.katex,I,e.showToolbarName,D]),It=(0,s.useCallback)(Z=>{var ee,me,pe,de,ve,Le,Fe,at,st,Ol,Ml,Rl,Hl,Dl,Bl,zl,Vl,Wl,Ul,Gl,_l,Kl,Xl,Zl,ql,Ql,Yl,Jl,eo,to,lo,oo,ro,no,ao,so,io,co,uo,mo,po,ho,fo,go,vo,bo,xo,ko,yo,wo;if(o.a.includes(Z))switch(Z){case"-":return(0,d.jsx)(Dn,{},`bar-${Kn++}`);case"bold":return(0,d.jsxs)("div",{className:M([`${o.p}-toolbar-item`,I&&`${o.p}-disabled`]),title:(ee=x.toolbarTips)==null?void 0:ee.bold,onClick:()=>{D("bold")},children:[(0,d.jsx)(B,{name:"bold"}),e.showToolbarName&&(0,d.jsx)("div",{className:`${o.p}-toolbar-item-name`,children:(me=x.toolbarTips)==null?void 0:me.bold})]},"bar-bold");case"underline":return(0,d.jsxs)("div",{className:M([`${o.p}-toolbar-item`,I&&`${o.p}-disabled`]),title:(pe=x.toolbarTips)==null?void 0:pe.underline,onClick:()=>{D("underline")},children:[(0,d.jsx)(B,{name:"underline"}),e.showToolbarName&&(0,d.jsx)("div",{className:`${o.p}-toolbar-item-name`,children:(de=x.toolbarTips)==null?void 0:de.underline})]},"bar-underline");case"italic":return(0,d.jsxs)("div",{className:M([`${o.p}-toolbar-item`,I&&`${o.p}-disabled`]),title:(ve=x.toolbarTips)==null?void 0:ve.italic,onClick:()=>{D("italic")},children:[(0,d.jsx)(B,{name:"italic"}),e.showToolbarName&&(0,d.jsx)("div",{className:`${o.p}-toolbar-item-name`,children:(Le=x.toolbarTips)==null?void 0:Le.italic})]},"bar-italic");case"strikeThrough":return(0,d.jsxs)("div",{className:M([`${o.p}-toolbar-item`,I&&`${o.p}-disabled`]),title:(Fe=x.toolbarTips)==null?void 0:Fe.strikeThrough,onClick:()=>{D("strikeThrough")},children:[(0,d.jsx)(B,{name:"strike-through"}),e.showToolbarName&&(0,d.jsx)("div",{className:`${o.p}-toolbar-item-name`,children:(at=x.toolbarTips)==null?void 0:at.strikeThrough})]},"bar-strikeThrough");case"title":return Nl;case"sub":return(0,d.jsxs)("div",{className:M([`${o.p}-toolbar-item`,I&&`${o.p}-disabled`]),title:(st=x.toolbarTips)==null?void 0:st.sub,onClick:()=>{D("sub")},children:[(0,d.jsx)(B,{name:"sub"}),e.showToolbarName&&(0,d.jsx)("div",{className:`${o.p}-toolbar-item-name`,children:(Ol=x.toolbarTips)==null?void 0:Ol.sub})]},"bar-sub");case"sup":return(0,d.jsxs)("div",{className:M([`${o.p}-toolbar-item`,I&&`${o.p}-disabled`]),title:(Ml=x.toolbarTips)==null?void 0:Ml.sup,onClick:()=>{D("sup")},children:[(0,d.jsx)(B,{name:"sup"}),e.showToolbarName&&(0,d.jsx)("div",{className:`${o.p}-toolbar-item-name`,children:(Rl=x.toolbarTips)==null?void 0:Rl.sup})]},"bar-sup");case"quote":return(0,d.jsxs)("div",{className:M([`${o.p}-toolbar-item`,I&&`${o.p}-disabled`]),title:(Hl=x.toolbarTips)==null?void 0:Hl.quote,onClick:()=>{D("quote")},children:[(0,d.jsx)(B,{name:"quote"}),e.showToolbarName&&(0,d.jsx)("div",{className:`${o.p}-toolbar-item-name`,children:(Dl=x.toolbarTips)==null?void 0:Dl.quote})]},"bar-quote");case"unorderedList":return(0,d.jsxs)("div",{className:M([`${o.p}-toolbar-item`,I&&`${o.p}-disabled`]),title:(Bl=x.toolbarTips)==null?void 0:Bl.unorderedList,onClick:()=>{D("unorderedList")},children:[(0,d.jsx)(B,{name:"unordered-list"}),e.showToolbarName&&(0,d.jsx)("div",{className:`${o.p}-toolbar-item-name`,children:(zl=x.toolbarTips)==null?void 0:zl.unorderedList})]},"bar-unorderedList");case"orderedList":return(0,d.jsxs)("div",{className:M([`${o.p}-toolbar-item`,I&&`${o.p}-disabled`]),title:(Vl=x.toolbarTips)==null?void 0:Vl.orderedList,onClick:()=>{D("orderedList")},children:[(0,d.jsx)(B,{name:"ordered-list"}),e.showToolbarName&&(0,d.jsx)("div",{className:`${o.p}-toolbar-item-name`,children:(Wl=x.toolbarTips)==null?void 0:Wl.orderedList})]},"bar-orderedList");case"task":return(0,d.jsxs)("div",{className:M([`${o.p}-toolbar-item`,I&&`${o.p}-disabled`]),title:(Ul=x.toolbarTips)==null?void 0:Ul.task,onClick:()=>{D("task")},children:[(0,d.jsx)(B,{name:"task"}),e.showToolbarName&&(0,d.jsx)("div",{className:`${o.p}-toolbar-item-name`,children:(Gl=x.toolbarTips)==null?void 0:Gl.task})]},"bar-task");case"codeRow":return(0,d.jsxs)("div",{className:M([`${o.p}-toolbar-item`,I&&`${o.p}-disabled`]),title:(_l=x.toolbarTips)==null?void 0:_l.codeRow,onClick:()=>{D("codeRow")},children:[(0,d.jsx)(B,{name:"code-row"}),e.showToolbarName&&(0,d.jsx)("div",{className:`${o.p}-toolbar-item-name`,children:(Kl=x.toolbarTips)==null?void 0:Kl.codeRow})]},"bar-codeRow");case"code":return(0,d.jsxs)("div",{className:M([`${o.p}-toolbar-item`,I&&`${o.p}-disabled`]),title:(Xl=x.toolbarTips)==null?void 0:Xl.code,onClick:()=>{D("code")},children:[(0,d.jsx)(B,{name:"code"}),e.showToolbarName&&(0,d.jsx)("div",{className:`${o.p}-toolbar-item-name`,children:(Zl=x.toolbarTips)==null?void 0:Zl.code})]},"bar-code");case"link":return(0,d.jsxs)("div",{className:M([`${o.p}-toolbar-item`,I&&`${o.p}-disabled`]),title:(ql=x.toolbarTips)==null?void 0:ql.link,onClick:()=>{if(I)return!1;_e(V(H({},nt),{type:"link",linkVisible:!0}))},children:[(0,d.jsx)(B,{name:"link"}),e.showToolbarName&&(0,d.jsx)("div",{className:`${o.p}-toolbar-item-name`,children:(Ql=x.toolbarTips)==null?void 0:Ql.link})]},"bar-link");case"image":return e.noUploadImg?(0,d.jsxs)("div",{className:M([`${o.p}-toolbar-item`,I&&`${o.p}-disabled`]),title:(Yl=x.toolbarTips)==null?void 0:Yl.image,onClick:()=>{if(I)return!1;_e(Te=>V(H({},Te),{type:"image",linkVisible:!0}))},children:[(0,d.jsx)(B,{name:"image"}),e.showToolbarName&&(0,d.jsx)("div",{className:`${o.p}-toolbar-item-name`,children:(Jl=x.toolbarTips)==null?void 0:Jl.image})]},"bar-image-no-upload"):Il;case"table":return Sl;case"revoke":return(0,d.jsxs)("div",{className:M([`${o.p}-toolbar-item`,I&&`${o.p}-disabled`]),title:(eo=x.toolbarTips)==null?void 0:eo.revoke,onClick:()=>{if(I)return!1;C.emit(Ae,Ve)},children:[(0,d.jsx)(B,{name:"revoke"}),e.showToolbarName&&(0,d.jsx)("div",{className:`${o.p}-toolbar-item-name`,children:(to=x.toolbarTips)==null?void 0:to.revoke})]},"bar-revoke");case"next":return(0,d.jsxs)("div",{className:M([`${o.p}-toolbar-item`,I&&`${o.p}-disabled`]),title:(lo=x.toolbarTips)==null?void 0:lo.next,onClick:()=>{if(I)return!1;C.emit(Ae,Qe)},children:[(0,d.jsx)(B,{name:"next"}),e.showToolbarName&&(0,d.jsx)("div",{className:`${o.p}-toolbar-item-name`,children:(oo=x.toolbarTips)==null?void 0:oo.next})]},"bar-next");case"save":return(0,d.jsxs)("div",{className:M([`${o.p}-toolbar-item`,I&&`${o.p}-disabled`]),title:(ro=x.toolbarTips)==null?void 0:ro.save,onClick:()=>{if(I)return!1;C.emit(Ae,Oe)},children:[(0,d.jsx)(B,{name:"save"}),e.showToolbarName&&(0,d.jsx)("div",{className:`${o.p}-toolbar-item-name`,children:(no=x.toolbarTips)==null?void 0:no.save})]},"bar-save");case"prettier":return e.noPrettier?"":(0,d.jsxs)("div",{className:M([`${o.p}-toolbar-item`,I&&`${o.p}-disabled`]),title:(ao=x.toolbarTips)==null?void 0:ao.prettier,onClick:()=>{D("prettier")},children:[(0,d.jsx)(B,{name:"prettier"}),e.showToolbarName&&(0,d.jsx)("div",{className:`${o.p}-toolbar-item-name`,children:(so=x.toolbarTips)==null?void 0:so.prettier})]},"bar-prettier");case"pageFullscreen":return!e.setting.fullscreen&&(0,d.jsxs)("div",{className:M([`${o.p}-toolbar-item`,e.setting.pageFullscreen&&`${o.p}-toolbar-active`,I&&`${o.p}-disabled`]),title:(io=x.toolbarTips)==null?void 0:io.pageFullscreen,onClick:()=>{if(I)return!1;rt("pageFullscreen")},children:[(0,d.jsx)(B,{name:e.setting.pageFullscreen?"minimize":"maximize"}),e.showToolbarName&&(0,d.jsx)("div",{className:`${o.p}-toolbar-item-name`,children:(co=x.toolbarTips)==null?void 0:co.pageFullscreen})]},"bar-pageFullscreen");case"fullscreen":return(0,d.jsxs)("div",{className:M([`${o.p}-toolbar-item`,e.setting.fullscreen&&`${o.p}-toolbar-active`,I&&`${o.p}-disabled`]),title:(uo=x.toolbarTips)==null?void 0:uo.fullscreen,onClick:()=>{if(I)return!1;bl()},children:[(0,d.jsx)(B,{name:e.setting.fullscreen?"fullscreen-exit":"fullscreen"}),e.showToolbarName&&(0,d.jsx)("div",{className:`${o.p}-toolbar-item-name`,children:(mo=x.toolbarTips)==null?void 0:mo.fullscreen})]},"bar-fullscreen");case"catalog":return(0,d.jsxs)("div",{className:M([`${o.p}-toolbar-item`,e.catalogVisible&&`${o.p}-toolbar-active`,I&&`${o.p}-disabled`]),title:(po=x.toolbarTips)==null?void 0:po.catalog,onClick:()=>{if(I)return!1;C.emit(Ae,G)},children:[(0,d.jsx)(B,{name:"catalog"}),e.showToolbarName&&(0,d.jsx)("div",{className:`${o.p}-toolbar-item-name`,children:(ho=x.toolbarTips)==null?void 0:ho.catalog})]},"bar-catalog");case"preview":return(0,d.jsxs)("div",{className:M([`${o.p}-toolbar-item`,e.setting.preview&&`${o.p}-toolbar-active`,I&&`${o.p}-disabled`]),title:(fo=x.toolbarTips)==null?void 0:fo.preview,onClick:()=>{if(I)return!1;rt("preview")},children:[(0,d.jsx)(B,{name:"preview"}),e.showToolbarName&&(0,d.jsx)("div",{className:`${o.p}-toolbar-item-name`,children:(go=x.toolbarTips)==null?void 0:go.preview})]},"bar-preview");case"previewOnly":return(0,d.jsxs)("div",{className:M([`${o.p}-toolbar-item`,e.setting.previewOnly&&`${o.p}-toolbar-active`,I&&`${o.p}-disabled`]),title:(vo=x.toolbarTips)==null?void 0:vo.previewOnly,onClick:()=>{if(I)return!1;rt("previewOnly")},children:[(0,d.jsx)(B,{name:"preview-only"}),e.showToolbarName&&(0,d.jsx)("div",{className:`${o.p}-toolbar-item-name`,children:(bo=x.toolbarTips)==null?void 0:bo.previewOnly})]},"bar-preview-only");case"htmlPreview":return(0,d.jsxs)("div",{className:M([`${o.p}-toolbar-item`,e.setting.htmlPreview&&`${o.p}-toolbar-active`,I&&`${o.p}-disabled`]),title:(xo=x.toolbarTips)==null?void 0:xo.htmlPreview,onClick:()=>{if(I)return!1;rt("htmlPreview")},children:[(0,d.jsx)(B,{name:"preview-html"}),e.showToolbarName&&(0,d.jsx)("div",{className:`${o.p}-toolbar-item-name`,children:(ko=x.toolbarTips)==null?void 0:ko.htmlPreview})]},"bar-htmlPreview");case"github":return(0,d.jsxs)("div",{className:M([`${o.p}-toolbar-item`,I&&`${o.p}-disabled`]),title:(yo=x.toolbarTips)==null?void 0:yo.github,onClick:()=>{if(I)return!1;(0,He.uM)("https://github.com/imzbf/md-editor-rt")},children:[(0,d.jsx)(B,{name:"github"}),e.showToolbarName&&(0,d.jsx)("div",{className:`${o.p}-toolbar-item-name`,children:(wo=x.toolbarTips)==null?void 0:wo.github})]},"bar-github");case"mermaid":return Pl;case"katex":return Ll}else if(e.defToolbars){const Te=e.defToolbars[Z];return Te?(0,s.cloneElement)(Te,{theme:Te.props.theme||fl,codeTheme:Te.props.codeTheme||hl,previewTheme:Te.props.previewTheme||gl,language:Te.props.language||vl,disabled:Te.props.disabled||I,showToolbarName:Te.props.showToolbarName||e.showToolbarName,insert(Oa){C.emit(Ae,W,"universal",{generate:Oa})}}):""}else return""},[e,I,(P=x.toolbarTips)==null?void 0:P.bold,(F=x.toolbarTips)==null?void 0:F.underline,(R=x.toolbarTips)==null?void 0:R.italic,(O=x.toolbarTips)==null?void 0:O.strikeThrough,(z=x.toolbarTips)==null?void 0:z.sub,(q=x.toolbarTips)==null?void 0:q.sup,(J=x.toolbarTips)==null?void 0:J.quote,(oe=x.toolbarTips)==null?void 0:oe.unorderedList,(X=x.toolbarTips)==null?void 0:X.orderedList,(Y=x.toolbarTips)==null?void 0:Y.task,(U=x.toolbarTips)==null?void 0:U.codeRow,(re=x.toolbarTips)==null?void 0:re.code,(ce=x.toolbarTips)==null?void 0:ce.link,(ne=x.toolbarTips)==null?void 0:ne.image,(Q=x.toolbarTips)==null?void 0:Q.revoke,(te=x.toolbarTips)==null?void 0:te.next,(K=x.toolbarTips)==null?void 0:K.save,(Pe=x.toolbarTips)==null?void 0:Pe.prettier,(De=x.toolbarTips)==null?void 0:De.pageFullscreen,(ae=x.toolbarTips)==null?void 0:ae.fullscreen,(ye=x.toolbarTips)==null?void 0:ye.catalog,(Ge=x.toolbarTips)==null?void 0:Ge.preview,($e=x.toolbarTips)==null?void 0:$e.previewOnly,(vt=x.toolbarTips)==null?void 0:vt.htmlPreview,(ot=x.toolbarTips)==null?void 0:ot.github,D,Nl,_e,nt,Il,Sl,Ae,rt,bl,Pl,Ll,fl,hl,gl,vl]),Fl=(0,s.useMemo)(()=>{const Z=bt.filter(de=>!pl.includes(de)),ee=Z.indexOf("="),me=ee===-1?Z:Z.slice(0,ee+1),pe=ee===-1?[]:Z.slice(ee,Number.MAX_SAFE_INTEGER);return[me.map(de=>It(de)),pe.map(de=>It(de))]},[bt,pl,It]);return(0,s.useEffect)(()=>{let Z=()=>{};return At.current&&(Z=(0,He.b1)(At.current)),()=>{Z()}},[bt]),(0,d.jsxs)(d.Fragment,{children:[bt.length>0&&(0,d.jsx)("div",{className:`${o.p}-toolbar-wrapper`,ref:At,id:ge,children:(0,d.jsxs)("div",{className:M([`${o.p}-toolbar`,e.showToolbarName&&`${o.p}-stn`]),children:[(0,d.jsx)("div",{className:`${o.p}-toolbar-left`,children:Fl[0]}),(0,d.jsx)("div",{className:`${o.p}-toolbar-right`,children:Fl[1]})]})}),(0,d.jsx)("label",{htmlFor:`${ge}_label`,style:{display:"none"},"aria-label":(ml=x.imgTitleItem)==null?void 0:ml.upload}),(0,d.jsx)("input",{id:`${ge}_label`,ref:Nt,accept:"image/*",type:"file",multiple:!0,style:{display:"none"}}),(0,d.jsx)(Vn,{linkVisible:nt.linkVisible,clipVisible:nt.clipVisible,type:nt.type,onCancel:La,onOk:Fa})]})},Zn=(0,s.memo)(Xn),qn=(e,t,l)=>{const{editorId:r}=(0,s.useContext)(le),[c,a]=(0,s.useState)({clear(){},init(){}});(0,s.useEffect)(()=>{var i;const n=(i=l.current)==null?void 0:i.view.contentDOM.getRootNode(),h=n.querySelector(`#${r} .cm-scroller`),g=n.querySelector(`[id="${r}-preview-wrapper"]`),p=n.querySelector(`[id="${r}-html-wrapper"]`);if(g||p){const m=g?Tn:Cn,u=g||p,[k,v]=m(h,u,l.current);a({init:k,clear:v})}},[t,e.setting.fullscreen,e.setting.pageFullscreen,e.setting.preview,e.setting.htmlPreview,r,l]),(0,s.useEffect)(()=>(e.scrollAuto&&!e.setting.previewOnly&&(e.setting.preview||e.setting.htmlPreview)?c.init():c.clear(),()=>{c.clear()}),[c,e.scrollAuto,e.setting.preview,e.setting.htmlPreview,e.setting.previewOnly])},Tt=(e,t,l)=>Ct(void 0,null,function*(){var r,c;let a="",i=0,n=0,h=!0,g=!1;const p=t.getSelectedText(),m=o.d.editorConfig.mermaidTemplate;if(/^h[1-6]{1}$/.test(e)){const u=e.replace(/^h(\d)/,(k,v)=>new Array(Number(v)).fill("#",0,v).join(""));a=`${u} ${p}`,i=u.length+1}else if(e==="prettier"){const u=window.prettier||o.d.editorExtensions.prettier.prettierInstance,k=[((c=window.prettierPlugins)==null?void 0:c.markdown)||o.d.editorExtensions.prettier.parserMarkdownInstance];!u||k[0]===void 0?(C.emit(l.editorId,be,{name:"prettier",message:"prettier is undefined"}),a=t.getValue()):a=yield u.format(t.getValue(),{parser:"markdown",plugins:k}),h=!1,g=!0}else switch(e){case"bold":{a=`**${p}**`,i=2,n=-2;break}case"underline":{a=`<u>${p}</u>`,i=3,n=-4;break}case"italic":{a=`*${p}*`,i=1,n=-1;break}case"strikeThrough":{a=`~~${p}~~`,i=2,n=-2;break}case"sub":{a=`~${p}~`,i=1,n=-1;break}case"sup":{a=`^${p}^`,i=1,n=-1;break}case"codeRow":{a="`"+p+"`",i=1,n=-1;break}case"quote":{a=`> ${p}`,i=2;break}case"orderedList":{a=`1. ${p}`,i=3;break}case"unorderedList":{a=`- ${p}`,i=2;break}case"task":{a=`- [ ] ${p}`,i=6;break}case"code":{const u=l.text||p||"",k=l.mode||"language";a=`\`\`\`${k}
${u}
\`\`\`
`,i=3,n=3+k.length-a.length;break}case"table":{a="|";const{selectedShape:u={x:1,y:1}}=l,{x:k,y:v}=u;for(let y=0;y<=v;y++)a+=" col |";a+=`
|`;for(let y=0;y<=v;y++)a+=" - |";for(let y=0;y<=k;y++){a+=`
|`;for(let $=0;$<=v;$++)a+=" content |"}i=2,n=5-a.length;break}case"link":{const{desc:u,url:k}=l;a=`[${u}](${k})`,h=!1;break}case"image":{const{desc:u,url:k,urls:v}=l;v instanceof Array?a=v.reduce((y,$)=>{const{url:f="",alt:b="",title:E=""}=typeof $=="object"?$:{url:$};return y+`![${b}](${f}${E?" '"+E+"'":""})
`},""):a=`![${u}](${k})
`,h=!1;break}case"flow":{a=`\`\`\`mermaid
${(m==null?void 0:m.flow)||`flowchart TD 
  Start --> Stop`}
\`\`\`
`,i=11,n=-5;break}case"sequence":{a=`\`\`\`mermaid
${(m==null?void 0:m.sequence)||`sequenceDiagram
  A->>B: hello!
  B-->>A: hi!
  A-)B: bye!`}
\`\`\`
`,i=11,n=-5;break}case"gantt":{a=`\`\`\`mermaid
${(m==null?void 0:m.gantt)||`gantt
title A Gantt Diagram
dateFormat  YYYY-MM-DD
section Section
A task  :a1, 2014-01-01, 30d
Another task  :after a1, 20d`}
\`\`\`
`,i=11,n=-5;break}case"class":{a=`\`\`\`mermaid
${(m==null?void 0:m.class)||`classDiagram
  class Animal
  Vehicle <|-- Car`}
\`\`\`
`,i=11,n=-5;break}case"state":{a=`\`\`\`mermaid
${(m==null?void 0:m.state)||`stateDiagram-v2
  s1 --> s2`}
\`\`\`
`,i=11,n=-5;break}case"pie":{a=`\`\`\`mermaid
${(m==null?void 0:m.pie)||`pie title Pets adopted by volunteers
  "Dogs" : 386
  "Cats" : 85
  "Rats" : 15`}
\`\`\`
`,i=11,n=-5;break}case"relationship":{a=`\`\`\`mermaid
${(m==null?void 0:m.relationship)||`erDiagram
  CAR ||--o{ NAMED-DRIVER : allows
  PERSON ||--o{ NAMED-DRIVER : is`}
\`\`\`
`,i=11,n=-5;break}case"journey":{a=`\`\`\`mermaid
${(m==null?void 0:m.journey)||`journey
  title My working day
  section Go to work
    Make tea: 5: Me
    Go upstairs: 3: Me
    Do work: 1: Me, Cat
  section Go home
    Go downstairs: 5: Me
    Sit down: 5: Me`}
\`\`\`
`,i=11,n=-5;break}case"katexInline":{a="$$",i=1,n=-1;break}case"katexBlock":{a=`$$

$$
`,i=3,n=-4;break}case"universal":{const{generate:u}=l,k=u(p);a=k.targetValue,h=(r=k.select)!=null?r:!0,i=k.deviationStart||0,n=k.deviationEnd||0}}return{text:a,options:{select:h,deviationStart:i,deviationEnd:n,replaceAll:g}}}),Ue=e=>{const t=new ie.xx;return l=>(t.get(e.state)?e.dispatch({effects:t.reconfigure(l)}):e.dispatch({effects:ie.Pe.appendConfig.of(t.of(l))}),!0)};class Qn{constructor(t){Ie(this,"view"),Ie(this,"maxLength",Number.MAX_SAFE_INTEGER),Ie(this,"toggleTabSize"),Ie(this,"togglePlaceholder"),Ie(this,"setExtensions"),Ie(this,"toggleDisabled"),Ie(this,"toggleReadOnly"),Ie(this,"toggleMaxlength"),this.view=t,this.toggleTabSize=Ue(this.view),this.togglePlaceholder=Ue(this.view),this.setExtensions=Ue(this.view),this.toggleDisabled=Ue(this.view),this.toggleReadOnly=Ue(this.view),this.toggleMaxlength=Ue(this.view)}getValue(){return this.view.state.doc.toString()}setValue(t,l=0,r=this.view.state.doc.length){this.view.dispatch({changes:{from:l,to:r,insert:t}})}getSelectedText(){const{from:t,to:l}=this.view.state.selection.main;return this.view.state.sliceDoc(t,l)}replaceSelectedText(t,l={select:!0,deviationStart:0,deviationEnd:0,replaceAll:!1},r){try{if(l.replaceAll){if(this.setValue(t),t.length>this.maxLength)throw new Error("The input text is too long");return}if(this.view.state.doc.length-this.getSelectedText().length+t.length>this.maxLength)throw new Error("The input text is too long");const{from:c}=this.view.state.selection.main;if(this.view.dispatch(this.view.state.replaceSelection(t)),l.select){const a=c+t.length+l.deviationEnd;this.view.dispatch({selection:{anchor:c+l.deviationStart,head:a}})}this.view.focus()}catch(c){if(c.message==="The input text is too long")C.emit(r,be,{name:"overlength",message:c.message,data:t});else throw c}}setTabSize(t){this.toggleTabSize([ie.$t.tabSize.of(t),et.Xt.of(" ".repeat(t))])}setPlaceholder(t){this.togglePlaceholder((0,fe.qf)(t))}focus(t){if(this.view.focus(),!t)return;let l=0,r=0,c=0;switch(t){case"start":break;case"end":{l=r=c=this.getValue().length;break}default:l=t.rangeAnchor||t.cursorPos,r=t.rangeHead||t.cursorPos,c=t.cursorPos}this.view.dispatch({scrollIntoView:!0,selection:ie.OF.create([ie.OF.range(l,r),ie.OF.cursor(c)],1)})}setDisabled(t){this.toggleDisabled([fe.Lz.editable.of(!t)])}setReadOnly(t){this.toggleReadOnly([ie.$t.readOnly.of(t)])}setMaxLength(t){this.maxLength=t,this.toggleMaxlength([ie.$t.changeFilter.of(l=>l.newDoc.length<=t)])}}const Yn="#e5c07b",Yt="var(--md-color)",Jn="#56b6c2",ea="#ffffff",tt="var(--md-color)",Jt="#e5c07b",ta="#e5c07b",la="var(--md-color)",el="#d19a66",oa="#c678dd",ra="#21252b",na="#2c313a",tl="var(--md-bk-color)",Et="var(--md-bk-color)",aa="#ceedfa33",ll="#528bff",sa=fe.Lz.theme({"&":{color:tt,backgroundColor:tl},".cm-content":{caretColor:ll},".cm-cursor, .cm-dropCursor":{borderLeftColor:ll},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:aa},".cm-panels":{backgroundColor:ra,color:tt},".cm-panels.cm-panels-top":{borderBottom:"1px solid var(--md-border-color)"},".cm-panels.cm-panels-bottom":{borderTop:"1px solid var(--md-border-color)"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#ceedfa33"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:tl,color:tt,borderRight:"1px solid",borderColor:"var(--md-border-color)"},".cm-activeLineGutter":{backgroundColor:na},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid var(--md-border-color)",backgroundColor:Et},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Et,borderBottomColor:Et},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{color:tt}}},{dark:!0}),ia=et.cr.define([{tag:T._A.keyword,color:oa},{tag:[T._A.name,T._A.deleted,T._A.character,T._A.propertyName,T._A.macroName],color:Yt},{tag:[T._A.function(T._A.variableName),T._A.labelName],color:ta},{tag:[T._A.color,T._A.constant(T._A.name),T._A.standard(T._A.name)],color:el},{tag:[T._A.definition(T._A.name),T._A.separator],color:tt},{tag:[T._A.typeName,T._A.className,T._A.number,T._A.changed,T._A.annotation,T._A.modifier,T._A.self,T._A.namespace],color:Yn},{tag:[T._A.operator,T._A.operatorKeyword,T._A.url,T._A.escape,T._A.regexp,T._A.link,T._A.special(T._A.string)],color:Jn},{tag:[T._A.meta,T._A.comment],color:Jt},{tag:T._A.strong,fontWeight:"bold"},{tag:T._A.emphasis,fontStyle:"italic"},{tag:T._A.strikethrough,textDecoration:"line-through"},{tag:T._A.link,color:Jt,textDecoration:"underline"},{tag:T._A.heading,fontWeight:"bold",color:Yt},{tag:[T._A.atom,T._A.bool,T._A.special(T._A.variableName)],color:el},{tag:[T._A.processingInstruction,T._A.string,T._A.inserted],color:la},{tag:T._A.invalid,color:ea}]),ol=[sa,(0,et.y9)(ia)],ca="#e5c07b",rl="#3f4a54",da="#56b6c2",ua="#fff",lt="#3f4a54",nl="#2d8cf0",ma="#2d8cf0",pa="#3f4a54",al="#d19a66",ha="#c678dd",fa="#f6f6f6",ga="#ceedfa33",sl="var(--md-bk-color)",jt="var(--md-bk-color)",va="#bad5fa",il="#3f4a54",ba=fe.Lz.theme({"&":{color:lt,backgroundColor:sl},".cm-content":{caretColor:il},".cm-cursor, .cm-dropCursor":{borderLeftColor:il},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:va},".cm-panels":{backgroundColor:fa,color:lt},".cm-panels.cm-panels-top":{borderBottom:"1px solid var(--md-border-color)"},".cm-panels.cm-panels-bottom":{borderTop:"1px solid var(--md-border-color)"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#ceedfa33"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:sl,color:lt,borderRight:"1px solid",borderColor:"var(--md-border-color)"},".cm-activeLineGutter":{backgroundColor:ga},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid var(--md-border-color)",backgroundColor:jt},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:jt,borderBottomColor:jt},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{color:lt}}}),xa=et.cr.define([{tag:T._A.keyword,color:ha},{tag:[T._A.name,T._A.deleted,T._A.character,T._A.propertyName,T._A.macroName],color:rl},{tag:[T._A.function(T._A.variableName),T._A.labelName],color:ma},{tag:[T._A.color,T._A.constant(T._A.name),T._A.standard(T._A.name)],color:al},{tag:[T._A.definition(T._A.name),T._A.separator],color:lt},{tag:[T._A.typeName,T._A.className,T._A.number,T._A.changed,T._A.annotation,T._A.modifier,T._A.self,T._A.namespace],color:ca},{tag:[T._A.operator,T._A.operatorKeyword,T._A.url,T._A.escape,T._A.regexp,T._A.link,T._A.special(T._A.string)],color:da},{tag:[T._A.meta,T._A.comment],color:nl},{tag:T._A.strong,fontWeight:"bold"},{tag:T._A.emphasis,fontStyle:"italic"},{tag:T._A.strikethrough,textDecoration:"line-through"},{tag:T._A.link,color:nl,textDecoration:"underline"},{tag:T._A.heading,fontWeight:"bold",color:rl},{tag:[T._A.atom,T._A.bool,T._A.special(T._A.variableName)],color:al},{tag:[T._A.processingInstruction,T._A.string,T._A.inserted],color:pa},{tag:T._A.invalid,color:ua}]),cl=[ba,(0,et.y9)(xa)],gt=(e,t,l,r,c)=>(a,i,n,h)=>{const g=`${e}${t}`.slice(h-n);a.dispatch(a.state.replaceSelection(`${g}${l}${r}`));const p=n+i.label.length+(c==="title"?l.length:0);a.dispatch({selection:ie.OF.create([ie.OF.range(n+i.label.length+(c==="title"?1:-t.length),p),ie.OF.cursor(p)],1)}),a.focus()},dl=e=>(t,l,r,c)=>{const a=e.slice(c-r);t.dispatch(t.state.replaceSelection(`${a} `))},ul=e=>{const t=l=>{const r=l.matchBefore(/^#+|^-\s*\[*\s*\]*|`+|\[|!\[*|^\|\s?\|?|\$\$?|!+\s*\w*/);return r===null||r.from==r.to&&l.explicit?null:{from:r.from,options:[...["h2","h3","h4","h5","h6"].map((c,a)=>{const i=new Array(a+2).fill("#").join("");return{label:i,type:"text",apply:dl(i)}}),...["unchecked","checked"].map(c=>{const a=c==="checked"?"- [x]":"- [ ]";return{label:a,type:"text",apply:dl(a)}}),...[["`",""],["```","language"],["```mermaid\n",""]].map(c=>({label:`${c[0]}${c[1]}`,type:"text",apply:gt(c[0],c[1],"",c[0]==="`"?"`":"\n```","type")})),{label:"[]()",type:"text"},{label:"![]()",type:"text"},{label:"| |",type:"text",detail:"table",apply:`| col | col | col |
| - | - | - |
| content | content | content |
| content | content | content |`},{label:"$",type:"text",apply:gt("$","","","$","type")},{label:"$$",type:"text",apply:gt("$$","",`
`,`
$$`,"title")},...["note","abstract","info","tip","success","question","warning","failure","danger","bug","example","quote","hint","caution","error","attention"].map(c=>({label:`!!! ${c}`,type:"text",apply:gt("!!!",` ${c}`," Title",`

!!!`,"title")}))]}};return(0,In.yU)({override:e?[t,...e]:[t]})},ka=(e,t)=>[{key:"Ctrl-b",mac:"Cmd-b",run:()=>(C.emit(e,W,"bold"),!0)},{key:"Ctrl-d",mac:"Cmd-d",run:Ne.SA,preventDefault:!0},{key:"Ctrl-s",mac:"Cmd-s",run:l=>(C.emit(e,Oe,l.state.doc.toString()),!0),shift:()=>(C.emit(e,W,"strikeThrough"),!0)},{key:"Ctrl-u",mac:"Cmd-u",preventDefault:!0,run:()=>(C.emit(e,W,"underline"),!0),shift:()=>(C.emit(e,W,"unorderedList"),!0)},{key:"Ctrl-i",mac:"Cmd-i",preventDefault:!0,run:()=>(C.emit(e,W,"italic"),!0),shift:()=>(C.emit(e,qe,"image"),!0)},{key:"Ctrl-1",mac:"Cmd-1",run:()=>(C.emit(e,W,"h1"),!0)},{key:"Ctrl-2",mac:"Cmd-2",run:()=>(C.emit(e,W,"h2"),!0)},{key:"Ctrl-3",mac:"Cmd-3",run:()=>(C.emit(e,W,"h3"),!0)},{key:"Ctrl-4",mac:"Cmd-4",run:()=>(C.emit(e,W,"h4"),!0)},{key:"Ctrl-5",mac:"Cmd-5",run:()=>(C.emit(e,W,"h5"),!0)},{key:"Ctrl-6",mac:"Cmd-6",run:()=>(C.emit(e,W,"h6"),!0)},{key:"Ctrl-ArrowUp",mac:"Cmd-ArrowUp",run:()=>(C.emit(e,W,"sup"),!0)},{key:"Ctrl-ArrowDown",mac:"Cmd-ArrowDown",run:()=>(C.emit(e,W,"sub"),!0)},{key:"Ctrl-o",mac:"Cmd-o",run:()=>(C.emit(e,W,"orderedList"),!0)},{key:"Ctrl-c",mac:"Cmd-c",shift:()=>(C.emit(e,W,"code"),!0),any(l,r){return(r.ctrlKey||r.metaKey)&&r.altKey&&r.code==="KeyC"?(C.emit(e,W,"codeRow"),!0):!1}},{key:"Ctrl-l",mac:"Cmd-l",run:()=>(C.emit(e,qe,"link"),!0)},{key:"Ctrl-f",mac:"Cmd-f",shift:()=>t.noPrettier?!1:(C.emit(e,W,"prettier"),!0)},{any:(l,r)=>(r.ctrlKey||r.metaKey)&&r.altKey&&r.shiftKey&&r.code==="KeyT"?(C.emit(e,W,"table"),!0):!1},...Sn.Eo],ya=(e,t)=>{const{editorId:l}=(0,s.useContext)(le),r=(0,s.useCallback)(c=>{c instanceof Promise?c.then(a=>{C.emit(l,W,"universal",{generate(){return{targetValue:a}}})}).catch(a=>{console.error(a)}):C.emit(l,W,"universal",{generate(){return{targetValue:c}}})},[l]);return(0,s.useCallback)(c=>{var a,i,n;if(!c.clipboardData)return;if(c.clipboardData.files.length>0){const{files:v}=c.clipboardData;C.emit(l,Me,Array.from(v).filter(y=>/image\/.*/.test(y.type))),c.preventDefault();return}const h=c.clipboardData.getData("text/plain"),g=((a=t.current)==null?void 0:a.view.state.selection.main.to)||0,p=((i=t.current)==null?void 0:i.view.state.doc.lineAt(g).from)||0,m=((n=t.current)==null?void 0:n.view.state.doc.sliceString(p,g))||"",u=/!\[.*\]\(\s*$/.test(m),k=/!\[.*\]\((.*)\s?.*\)/.test(h);if(u){const v=e.transformImgUrl(h);r(v),c.preventDefault();return}else if(k){const v=h.match(new RegExp(`(?<=!\\[.*\\]\\()([^)\\s]+)(?=\\s?["']?.*["']?\\))`,"g"));v?Promise.all(v.map(y=>e.transformImgUrl(y))).then(y=>{r(y.reduce(($,f,b)=>$.replace(v[b],f),h))}):r(h),c.preventDefault();return}if(e.autoDetectCode&&c.clipboardData.types.includes("vscode-editor-data")){const v=JSON.parse(c.clipboardData.getData("vscode-editor-data"));C.emit(l,W,"code",{mode:v.mode,text:c.clipboardData.getData("text/plain")}),c.preventDefault();return}e.maxLength&&h.length+e.modelValue.length>e.maxLength&&C.emit(l,be,{name:"overlength",message:"The input text is too long",data:h})},[t,l,r,e])};fe.Lz.EDIT_CONTEXT=!1;const wa=e=>{const{tabWidth:t,editorId:l,theme:r}=(0,s.useContext)(le),c=(0,s.useRef)(null),a=(0,s.useRef)(),i=(0,s.useRef)(!0),[n]=(0,s.useState)(()=>({language:new ie.xx,theme:new ie.xx,autocompletion:new ie.xx,update:new ie.xx,domEvent:new ie.xx,history:new ie.xx})),[h]=(0,s.useState)(()=>ka(l,e)),g=(0,s.useCallback)(()=>[...h,...Ne.pw,...Ne.cL,Ne.Yc],[h]),p=ya(e,a),[m,u]=(0,s.useState)({}),k=(0,s.useMemo)(()=>{const f={paste:p,blur:e.onBlur,focus:e.onFocus,drop:e.onDrop,input:w=>{e.onInput&&e.onInput(w);const{data:j}=w;e.maxLength&&e.modelValue.length+j.length>e.maxLength&&C.emit(l,be,{name:"overlength",message:"The input text is too long",data:j})}},b=H({},f),E=Object.keys(f);for(const w in m){const j=w;E.includes(j)?b[j]=(A,L)=>{m[j](A,L),A.defaultPrevented||f[j](A,L)}:b[j]=m[j]}return b},[m,l,p,e]),[v]=(0,s.useState)(()=>[fe.w4.of(g()),n.history.of((0,Ne.b6)()),n.language.of((0,Nn.markdown)({codeLanguages:An.e})),fe.Lz.lineWrapping,n.update.of(fe.Lz.updateListener.of(f=>{f.docChanged&&e.onChange(f.state.doc.toString())})),n.domEvent.of(fe.Lz.domEventHandlers(k)),(0,fe.VH)()]),[y]=(0,s.useState)(()=>o.d.codeMirrorExtensions(r,[...v,n.theme.of(r==="light"?cl:ol),n.autocompletion.of(ul(e.completions))],g(),{editorId:l})),$=(0,s.useCallback)(()=>{var f,b;(f=a.current)==null||f.view.dispatch({effects:n.history.reconfigure([])}),(b=a.current)==null||b.view.dispatch({effects:n.history.reconfigure((0,Ne.b6)())})},[n.history]);return(0,s.useEffect)(()=>{const f=new fe.Lz({doc:e.modelValue,parent:c.current,extensions:y}),b=new Qn(f);a.current=b,setTimeout(()=>{b.setTabSize(t),b.setDisabled(e.disabled),b.setReadOnly(e.readOnly),e.placeholder&&b.setPlaceholder(e.placeholder),typeof e.maxLength=="number"&&b.setMaxLength(e.maxLength),e.autoFocus&&f.focus(),i.current=!1},0);const E=()=>(0,Ne.tN)(f),w=()=>(0,Ne.ZS)(f),j=L=>{u(L)},A=(L,S)=>{const P=f.state.doc.line(L);f.dispatch(f.state.update({changes:{from:P.from,to:P.to,insert:S}}))};return C.on(l,{name:Ve,callback:E}),C.on(l,{name:Qe,callback:w}),C.on(l,{name:he,callback:j}),C.on(l,{name:yt,callback:A}),()=>{f.destroy(),C.remove(l,Ve,E),C.remove(l,Qe,w),C.remove(l,he,j),C.remove(l,yt,A),i.current=!0}},[]),(0,s.useEffect)(()=>{const f=(b,...E)=>Ct(void 0,[b,...E],function*(w,j={}){var A,L;if(w==="image"&&j.transform){const S=e.transformImgUrl(j.url);if(S instanceof Promise)S.then(P=>Ct(void 0,null,function*(){var F;const{text:R,options:O}=yield Tt(w,a.current,V(H({},j),{url:P}));(F=a.current)==null||F.replaceSelectedText(R,O,l)})).catch(P=>{console.error(P)});else{const{text:P,options:F}=yield Tt(w,a.current,V(H({},j),{url:S}));(A=a.current)==null||A.replaceSelectedText(P,F,l)}}else{const{text:S,options:P}=yield Tt(w,a.current,j);(L=a.current)==null||L.replaceSelectedText(S,P,l)}});return C.on(l,{name:W,callback:f}),()=>{C.remove(l,W,f)}},[l,e]),(0,s.useEffect)(()=>{setTimeout(()=>{var f;(f=a.current)==null||f.view.dispatch({effects:n.theme.reconfigure(r==="light"?cl:ol)})},0)},[n.theme,r]),(0,s.useEffect)(()=>{setTimeout(()=>{var f;(f=a.current)==null||f.view.dispatch({effects:[n.update.reconfigure(fe.Lz.updateListener.of(b=>{b.docChanged&&e.onChange(b.state.doc.toString())})),n.domEvent.reconfigure(fe.Lz.domEventHandlers(k)),n.autocompletion.reconfigure(ul(e.completions))]})},0)},[n.autocompletion,n.domEvent,n.update,k,e]),(0,s.useEffect)(()=>{var f,b;((f=a.current)==null?void 0:f.getValue())!==e.modelValue&&((b=a.current)==null||b.setValue(e.modelValue))},[e.modelValue]),(0,s.useEffect)(()=>{var f;i.current||(f=a.current)==null||f.setTabSize(t)},[t]),(0,s.useEffect)(()=>{var f;i.current||(f=a.current)==null||f.setPlaceholder(e.placeholder)},[e.placeholder]),(0,s.useEffect)(()=>{var f;i.current||(f=a.current)==null||f.setDisabled(e.disabled)},[e.disabled]),(0,s.useEffect)(()=>{var f;i.current||(f=a.current)==null||f.setDisabled(e.readOnly)},[e.readOnly]),(0,s.useEffect)(()=>{var f;i.current||typeof e.maxLength=="number"&&((f=a.current)==null||f.setMaxLength(e.maxLength))},[e.maxLength]),{inputWrapperRef:c,codeMirrorUt:a,resetHistory:$}},$a=(e,t,l)=>{const{onInputBoxWidthChange:r}=e,[c,a]=(0,s.useState)({width:e.inputBoxWidth}),[i,n]=(0,s.useState)({left:e.inputBoxWidth}),[h,g]=(0,s.useState)(e.setting.preview||e.setting.htmlPreview),p=(0,s.useRef)(e.inputBoxWidth);return(0,s.useEffect)(()=>{var m,u;const k=((m=t.current)==null?void 0:m.offsetWidth)||0,v=((u=t.current)==null?void 0:u.getBoundingClientRect().x)||0,y=b=>{let E=b.x-v;E<o.M?E=o.M:E>k-o.M&&(E=k-o.M);const w=`${E}px`;a(j=>V(H({},j),{width:w})),n(j=>V(H({},j),{left:w})),p.current=w,r==null||r(w)},$=b=>{b.target===l.current&&(n(E=>H({},E)),document.addEventListener("mousemove",y))},f=()=>{n(b=>H({},b)),document.removeEventListener("mousemove",y)};return document.addEventListener("mousedown",$),document.addEventListener("mouseup",f),()=>{document.removeEventListener("mousedown",$),document.removeEventListener("mouseup",f),document.removeEventListener("mousemove",y)}},[t,r,l]),(0,s.useEffect)(()=>{e.inputBoxWidth&&(p.current=e.inputBoxWidth,a(m=>V(H({},m),{width:e.inputBoxWidth})),n(m=>V(H({},m),{left:e.inputBoxWidth})))},[e.inputBoxWidth]),(0,s.useEffect)(()=>{const m=e.setting.previewOnly;let u="",k="",v=!1;m?(u="0%",k="none",v=!0):!e.setting.htmlPreview&&!e.setting.preview?(u="100%",k="none",v=!1):(u=p.current,k="initial",v=!0),g(v),a(y=>V(H({},y),{width:u})),n(y=>V(H({},y),{display:k}))},[e.setting.htmlPreview,e.setting.preview,e.setting.previewOnly]),{inputWrapperStyle:c,resizeOperateStyle:i,showPreviewWrapper:h}},Ca=(0,s.forwardRef)((e,t)=>{const{onHtmlChanged:l}=e,{editorId:r}=(0,s.useContext)(le),[c,a]=(0,s.useState)(""),i=(0,s.useRef)(null),n=(0,s.useRef)(null),h=(0,s.useCallback)(y=>{a(y),l==null||l(y)},[l]),{inputWrapperRef:g,codeMirrorUt:p,resetHistory:m}=wa(e),{inputWrapperStyle:u,resizeOperateStyle:k,showPreviewWrapper:v}=$a(e,i,n);return qn(e,c,p),(0,s.useImperativeHandle)(t,()=>({getSelectedText(){var y;return(y=p.current)==null?void 0:y.getSelectedText()},focus(y){var $;($=p.current)==null||$.focus(y)},resetHistory:m,getEditorView(){var y;return(y=p.current)==null?void 0:y.view}}),[p,m]),(0,d.jsxs)("div",{className:`${o.p}-content${v?" has-preview":""}`,ref:i,children:[(0,d.jsx)("div",{className:`${o.p}-input-wrapper`,style:u,ref:g}),(e.setting.htmlPreview||e.setting.preview)&&(0,d.jsx)("div",{className:`${o.p}-resize-operate`,style:k,ref:n}),v&&(0,d.jsx)(Nr,{modelValue:e.modelValue,onChange:e.onChange,setting:e.setting,onHtmlChanged:h,onGetCatalog:e.onGetCatalog,mdHeadingId:e.mdHeadingId,noMermaid:e.noMermaid,sanitize:e.sanitize,noKatex:e.noKatex,formatCopiedText:e.formatCopiedText,noHighlight:e.noHighlight,noImgZoomIn:e.noImgZoomIn,sanitizeMermaid:e.sanitizeMermaid,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold},"display-editor"),e.catalogVisible&&(0,d.jsx)(jn,{theme:e.theme,className:`${o.p}-catalog-editor`,editorId:r,mdHeadingId:e.mdHeadingId,scrollElementOffsetTop:2},"internal-catalog")]})}),Ta=(0,s.memo)(Ca),Ea=({modelValue:e})=>{const{usedLanguageText:t}=(0,s.useContext)(le);return(0,s.useMemo)(()=>{var l;return(0,d.jsxs)("div",{className:`${o.p}-footer-item`,children:[(0,d.jsx)("label",{className:`${o.p}-footer-label`,children:`${(l=t.footer)==null?void 0:l.markdownTotal}:`}),(0,d.jsx)("span",{children:e.length||0})]})},[t,e])},ja=e=>{const t=(0,s.useCallback)(()=>{e.disabled||e.onChange(!e.checked)},[e]);return(0,d.jsx)("div",{className:M([`${o.p}-checkbox`,e.checked&&`${o.p}-checkbox-checked`,e.disabled&&`${o.p}-disabled`]),onClick:t})},Aa=e=>{var t;const{usedLanguageText:l,disabled:r}=(0,s.useContext)(le);return(0,s.useMemo)(()=>{var c;return(0,d.jsxs)("div",{className:M([`${o.p}-footer-item`,r&&`${o.p}-disabled`]),children:[(0,d.jsx)("label",{className:`${o.p}-footer-label`,onClick:()=>{e.onScrollAutoChange(!e.scrollAuto)},children:(c=l.footer)==null?void 0:c.scrollAuto}),(0,d.jsx)(ja,{disabled:r,checked:e.scrollAuto,onChange:e.onScrollAutoChange})]})},[(t=l.footer)==null?void 0:t.scrollAuto,r,e])},Na=e=>{const{theme:t,language:l,disabled:r}=(0,s.useContext)(le),c=(0,s.useCallback)(n=>{if(o.b.includes(n))switch(n){case"markdownTotal":return(0,d.jsx)(Ea,{modelValue:e.modelValue},"markdown-total");case"scrollSwitch":return!e.noScrollAuto&&(0,d.jsx)(Aa,{scrollAuto:e.scrollAuto,onScrollAutoChange:e.onScrollAutoChange},"scroll-auto")}else{const h=e.defFooters[n];return typeof h!="string"?(0,s.cloneElement)(h,{theme:h.props.theme||t,language:h.props.language||l,disabled:h.props.disabled||r}):h||""}},[e.modelValue,e.noScrollAuto,e.scrollAuto,e.onScrollAutoChange,e.defFooters,t,l,r]),[a,i]=(0,s.useMemo)(()=>{const n=e.footers.indexOf("="),h=n===-1?e.footers:e.footers.slice(0,n),g=n===-1?[]:e.footers.slice(n,Number.MAX_SAFE_INTEGER);return[h.map(p=>c(p)),g.map(p=>c(p))]},[e.footers,c]);return(0,d.jsxs)("div",{className:`${o.p}-footer`,children:[(0,d.jsx)("div",{className:`${o.p}-footer-left`,children:a}),(0,d.jsx)("div",{className:`${o.p}-footer-right`,children:i})]})},Ia=(0,s.memo)(Na),Sa=(0,s.forwardRef)((e,t)=>{const{value:l=e.modelValue||o.f.modelValue,theme:r=o.f.theme,codeTheme:c=o.f.codeTheme,className:a=o.f.className,toolbars:i=o.f.toolbars,toolbarsExclude:n=o.f.toolbarsExclude,defToolbars:h=o.f.defToolbars,tabWidth:g=o.f.tabWidth,showCodeRowNumber:p=o.f.showCodeRowNumber,previewTheme:m=o.f.previewTheme,noPrettier:u=o.f.noPrettier,tableShape:k=o.f.tableShape,noMermaid:v=o.f.noMermaid,noKatex:y=o.f.noKatex,placeholder:$=o.f.placeholder,onChange:f=o.f.onChange,onHtmlChanged:b=o.f.onHtmlChanged,onGetCatalog:E=o.f.onGetCatalog,sanitize:w=o.f.sanitize,onError:j=o.f.onError,mdHeadingId:A=o.f.mdHeadingId,footers:L=o.f.footers,defFooters:S=o.f.defFooters,noUploadImg:P=o.f.noUploadImg,noHighlight:F=o.f.noHighlight,noImgZoomIn:R=o.f.noImgZoomIn,language:O=o.f.language,inputBoxWidth:z=o.f.inputBoxWidth,sanitizeMermaid:q=o.f.sanitizeMermaid,transformImgUrl:J=o.f.transformImgUrl,codeFoldable:oe=o.f.codeFoldable,autoFoldThreshold:X=o.f.autoFoldThreshold}=e,Y=Jo(e),[U]=(0,s.useState)(()=>({editorId:Y,noKatex:y,noMermaid:v,noPrettier:u,noUploadImg:P,noHighlight:F})),[re,ce]=(0,s.useState)(()=>({scrollAuto:e.scrollAuto===void 0?!0:e.scrollAuto})),ne=(0,s.useRef)(null),Q=(0,s.useRef)(),te=(0,s.useCallback)(Ge=>{ce($e=>V(H({},$e),{scrollAuto:Ge}))},[ce]);_o(e,U),Ko(U),Zo(e,U),Xo(U.editorId,j);const K=qo(e,U),[Pe,De,ae,ye]=Qo(e);return Yo(t,U,K,ae,ye,Q),(0,s.useEffect)(()=>()=>{C.clear(U.editorId)},[U.editorId]),(0,d.jsx)(le.Provider,{value:{editorId:U.editorId,tabWidth:g,theme:r,language:O,highlight:Pe,showCodeRowNumber:p,usedLanguageText:De,previewTheme:m,customIcon:e.customIcon||{},rootRef:ne,disabled:e.disabled},children:(0,d.jsxs)("div",{id:U.editorId,className:M([o.p,!!a&&a,r==="dark"&&`${o.p}-dark`,(ae.fullscreen||ae.pageFullscreen)&&`${o.p}-fullscreen`]),style:e.style,ref:ne,children:[i.length>0&&(0,d.jsx)(Zn,{noPrettier:U.noPrettier,toolbars:i,toolbarsExclude:n,setting:ae,updateSetting:ye,tableShape:k,defToolbars:h,noUploadImg:U.noUploadImg,showToolbarName:e.showToolbarName,catalogVisible:K,codeTheme:c}),(0,d.jsx)(Ta,{ref:Q,modelValue:l,onChange:f,setting:ae,mdHeadingId:A,onHtmlChanged:b,onGetCatalog:E,sanitize:w,noMermaid:U.noMermaid,noPrettier:U.noPrettier,noHighlight:U.noHighlight,placeholder:$,noKatex:U.noKatex,scrollAuto:re.scrollAuto,formatCopiedText:e.formatCopiedText,autoFocus:e.autoFocus,disabled:e.disabled,readOnly:e.readOnly,maxLength:e.maxLength,autoDetectCode:e.autoDetectCode,onBlur:e.onBlur,onFocus:e.onFocus,onInput:e.onInput,completions:e.completions,catalogVisible:K,theme:e.theme,noImgZoomIn:R,onDrop:e.onDrop,inputBoxWidth:z,onInputBoxWidthChange:e.onInputBoxWidthChange,sanitizeMermaid:q,transformImgUrl:J,codeFoldable:oe,autoFoldThreshold:X}),L.length>0&&(0,d.jsx)(Ia,{modelValue:l,footers:L,defFooters:S,noScrollAuto:!ae.preview&&!ae.htmlPreview||ae.previewOnly,scrollAuto:re.scrollAuto,onScrollAutoChange:te})]})})})},35156:(we,Be,N)=>{N.d(Be,{M:()=>Re,a:()=>be,b:()=>W,c:()=>Qe,d:()=>Ve,f:()=>qe,g:()=>Ze,p:()=>Oe,s:()=>Me});var d=N(62533),s=Object.defineProperty,it=Object.getOwnPropertySymbols,xt=Object.prototype.hasOwnProperty,kt=Object.prototype.propertyIsEnumerable,ct=(_,se,he)=>se in _?s(_,se,{enumerable:!0,configurable:!0,writable:!0,value:he}):_[se]=he,C=(_,se)=>{for(var he in se||(se={}))xt.call(se,he)&&ct(_,he,se[he]);if(it)for(var he of it(se))kt.call(se,he)&&ct(_,he,se[he]);return _};const Oe="md-editor",G="https://unpkg.com",Ke=`${G}/@highlightjs/cdn-assets@11.10.0/highlight.min.js`,Xe={main:`${G}/prettier@3.3.3/standalone.js`,markdown:`${G}/prettier@3.3.3/plugins/markdown.js`},dt={css:`${G}/cropperjs@1.6.2/dist/cropper.min.css`,js:`${G}/cropperjs@1.6.2/dist/cropper.min.js`},ut=`${G}/screenfull@5.2.0/dist/screenfull.js`,mt=`${G}/mermaid@11.3.0/dist/mermaid.min.js`,pt={js:`${G}/katex@0.16.11/dist/katex.min.js`,css:`${G}/katex@0.16.11/dist/katex.min.css`},Ze={a11y:{light:`${G}/@highlightjs/cdn-assets@11.10.0/styles/a11y-light.min.css`,dark:`${G}/@highlightjs/cdn-assets@11.10.0/styles/a11y-dark.min.css`},atom:{light:`${G}/@highlightjs/cdn-assets@11.10.0/styles/atom-one-light.min.css`,dark:`${G}/@highlightjs/cdn-assets@11.10.0/styles/atom-one-dark.min.css`},github:{light:`${G}/@highlightjs/cdn-assets@11.10.0/styles/github.min.css`,dark:`${G}/@highlightjs/cdn-assets@11.10.0/styles/github-dark.min.css`},gradient:{light:`${G}/@highlightjs/cdn-assets@11.10.0/styles/gradient-light.min.css`,dark:`${G}/@highlightjs/cdn-assets@11.10.0/styles/gradient-dark.min.css`},kimbie:{light:`${G}/@highlightjs/cdn-assets@11.10.0/styles/kimbie-light.min.css`,dark:`${G}/@highlightjs/cdn-assets@11.10.0/styles/kimbie-dark.min.css`},paraiso:{light:`${G}/@highlightjs/cdn-assets@11.10.0/styles/paraiso-light.min.css`,dark:`${G}/@highlightjs/cdn-assets@11.10.0/styles/paraiso-dark.min.css`},qtcreator:{light:`${G}/@highlightjs/cdn-assets@11.10.0/styles/qtcreator-light.min.css`,dark:`${G}/@highlightjs/cdn-assets@11.10.0/styles/qtcreator-dark.min.css`},stackoverflow:{light:`${G}/@highlightjs/cdn-assets@11.10.0/styles/stackoverflow-light.min.css`,dark:`${G}/@highlightjs/cdn-assets@11.10.0/styles/stackoverflow-dark.min.css`}},ze={highlight:{js:{integrity:"sha384-GdEWAbCjn+ghjX0gLx7/N1hyTVmPAjdC2OvoAA0RyNcAOhqwtT8qnbCxWle2+uJX",crossOrigin:"anonymous"},css:{a11y:{light:{integrity:"sha384-qdZDAN3jffvh670RHw1wxLekabidEFaNRninYgIzBvMbL6WlHdXeHS/Bt+vx33lN",crossOrigin:"anonymous"},dark:{integrity:"sha384-2QAAjX8pqaM5azX68KWI2wExF6Q13kY4kEiQFY4b/1zPe6rpgmTByNpDEllH3sb+",crossOrigin:"anonymous"}},atom:{light:{integrity:"sha384-w6Ujm1VWa9HYFqGc89oAPn/DWDi2gUamjNrq9DRvEYm2X3ClItg9Y9xs1ViVo5b5",crossOrigin:"anonymous"},dark:{integrity:"sha384-oaMLBGEzBOJx3UHwac0cVndtX5fxGQIfnAeFZ35RTgqPcYlbprH9o9PUV/F8Le07",crossOrigin:"anonymous"}},github:{light:{integrity:"sha384-eFTL69TLRZTkNfYZOLM+G04821K1qZao/4QLJbet1pP4tcF+fdXq/9CdqAbWRl/L",crossOrigin:"anonymous"},dark:{integrity:"sha384-wH75j6z1lH97ZOpMOInqhgKzFkAInZPPSPlZpYKYTOqsaizPvhQZmAtLcPKXpLyH",crossOrigin:"anonymous"}},gradient:{light:{integrity:"sha384-yErHBR8aEZPxRl3XmR8dGSRAclMlnSRRw8sXQLcmPWzWUvb56BzQmBw3EWHl7QGI",crossOrigin:"anonymous"},dark:{integrity:"sha384-lUCvtSOdvDbp5hLWKgwz/taFu1HxlpqES2OVP5UG2JMTfnU481gXcBhGF9lAGoSr",crossOrigin:"anonymous"}},kimbie:{light:{integrity:"sha384-tloeSLUPczAvoZ48TUz+OxRie0oYLCRwlkadUXovGzzJEIbNQB2TkfUuvJ6SW5Mi",crossOrigin:"anonymous"},dark:{integrity:"sha384-o5F1vUaMNOmou1sQrsWiFo4/QUGSV0svqNZW+EesmKxWC8MpFJcveBhAyfvTHbGb",crossOrigin:"anonymous"}},paraiso:{light:{integrity:"sha384-5j6QHU2Hwg1ehtlIQNDebhETDB8bga3/88hzBFsMRaGmgQHCftqIN7GZNDNw0vTL",crossOrigin:"anonymous"},dark:{integrity:"sha384-I5vnnMQu0LWDQnHpT61xyoMwKarAB8jpZkB2ioFOlmzUFnIFaV4QbUwlBBOMKhTH",crossOrigin:"anonymous"}},qtcreator:{light:{integrity:"sha384-iEBgHrwi8Hv4dSZBz+MOGvS05rF7I7fGKM2fASQyE9jn2Istg9Qd5dSoK18WyRTB",crossOrigin:"anonymous"},dark:{integrity:"sha384-D6LXJGWNR4QV7gnpuP3ccbvOYoR02td3cU0y7lESABPg/tzCSC4m+y+M2TtrmpHc",crossOrigin:"anonymous"}},stackoverflow:{light:{integrity:"sha384-FMwt7cTGo4aLxZnno5k0xTj0W4gmi48Kwept+y/oQmE6cFk36Kr+QJZOKNOQwORe",crossOrigin:"anonymous"},dark:{integrity:"sha384-iL+x+BroCyHm/p2c6sMA9umXhdCWp2cKe4QUjPeMzHgwXAk+ZxHyIGP3NZTZensU",crossOrigin:"anonymous"}}}},prettier:{standaloneJs:{integrity:"sha384-92h6ALm8/lHpNGn6MfGlgZ+I8c/4yn/nSN8dV9ZmDxqbP9L93gk/Jj2i0LtV+AVd",crossOrigin:"anonymous"},parserMarkdownJs:{integrity:"sha384-5ufuUgoSsr/2oihBZ5d+c+yt0qaUmzLtUz41VZNJ4txtyJ6mBve3ZwuKoq/IygYX",crossOrigin:"anonymous"}},cropper:{js:{integrity:"sha384-jrOgQzBlDeUNdmQn3rUt/PZD+pdcRBdWd/HWRqRo+n2OR2QtGyjSaJC0GiCeH+ir",crossOrigin:"anonymous"},css:{integrity:"sha384-6LFfkTKLRlzFtgx8xsWyBdKGpcMMQTkv+dB7rAbugeJAu1Ym2q1Aji1cjHBG12Xh",crossOrigin:"anonymous"}},screenfull:{js:{integrity:"sha384-Qfbv8upMDu/ikv42M0Jnym2hahbDQ77Nm8PGU0G+iA6UIwt1+scE6P1qKXA0anWU",crossOrigin:"anonymous"}},mermaid:{js:{integrity:"sha384-B2tp/GqmE6VfDRB3JPTsesr0+SXypThjLSvQEQH7iv3f3/PYKCm5Q4+SGPcitStz",crossOrigin:"anonymous"}},katex:{js:{integrity:"sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg",crossOrigin:"anonymous"},css:{integrity:"sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+",crossOrigin:"anonymous"}}},be=["bold","underline","italic","strikeThrough","-","title","sub","sup","quote","unorderedList","orderedList","task","-","codeRow","code","link","image","table","mermaid","katex","-","revoke","next","save","=","prettier","pageFullscreen","fullscreen","preview","previewOnly","htmlPreview","catalog","github"],W=["markdownTotal","=","scrollSwitch"],Me={"zh-CN":{toolbarTips:{bold:"\u52A0\u7C97",underline:"\u4E0B\u5212\u7EBF",italic:"\u659C\u4F53",strikeThrough:"\u5220\u9664\u7EBF",title:"\u6807\u9898",sub:"\u4E0B\u6807",sup:"\u4E0A\u6807",quote:"\u5F15\u7528",unorderedList:"\u65E0\u5E8F\u5217\u8868",orderedList:"\u6709\u5E8F\u5217\u8868",task:"\u4EFB\u52A1\u5217\u8868",codeRow:"\u884C\u5185\u4EE3\u7801",code:"\u5757\u7EA7\u4EE3\u7801",link:"\u94FE\u63A5",image:"\u56FE\u7247",table:"\u8868\u683C",mermaid:"mermaid\u56FE",katex:"katex\u516C\u5F0F",revoke:"\u540E\u9000",next:"\u524D\u8FDB",save:"\u4FDD\u5B58",prettier:"\u7F8E\u5316",pageFullscreen:"\u6D4F\u89C8\u5668\u5168\u5C4F",fullscreen:"\u5C4F\u5E55\u5168\u5C4F",preview:"\u9884\u89C8",previewOnly:"\u4EC5\u9884\u89C8",htmlPreview:"html\u4EE3\u7801\u9884\u89C8",catalog:"\u76EE\u5F55",github:"\u6E90\u7801\u5730\u5740"},titleItem:{h1:"\u4E00\u7EA7\u6807\u9898",h2:"\u4E8C\u7EA7\u6807\u9898",h3:"\u4E09\u7EA7\u6807\u9898",h4:"\u56DB\u7EA7\u6807\u9898",h5:"\u4E94\u7EA7\u6807\u9898",h6:"\u516D\u7EA7\u6807\u9898"},imgTitleItem:{link:"\u6DFB\u52A0\u94FE\u63A5",upload:"\u4E0A\u4F20\u56FE\u7247",clip2upload:"\u88C1\u526A\u4E0A\u4F20"},linkModalTips:{linkTitle:"\u6DFB\u52A0\u94FE\u63A5",imageTitle:"\u6DFB\u52A0\u56FE\u7247",descLabel:"\u94FE\u63A5\u63CF\u8FF0\uFF1A",descLabelPlaceHolder:"\u8BF7\u8F93\u5165\u63CF\u8FF0...",urlLabel:"\u94FE\u63A5\u5730\u5740\uFF1A",urlLabelPlaceHolder:"\u8BF7\u8F93\u5165\u94FE\u63A5...",buttonOK:"\u786E\u5B9A"},clipModalTips:{title:"\u88C1\u526A\u56FE\u7247\u4E0A\u4F20",buttonUpload:"\u4E0A\u4F20"},copyCode:{text:"\u590D\u5236\u4EE3\u7801",successTips:"\u5DF2\u590D\u5236\uFF01",failTips:"\u590D\u5236\u5931\u8D25\uFF01"},mermaid:{flow:"\u6D41\u7A0B\u56FE",sequence:"\u65F6\u5E8F\u56FE",gantt:"\u7518\u7279\u56FE",class:"\u7C7B\u56FE",state:"\u72B6\u6001\u56FE",pie:"\u997C\u56FE",relationship:"\u5173\u7CFB\u56FE",journey:"\u65C5\u7A0B\u56FE"},katex:{inline:"\u884C\u5185\u516C\u5F0F",block:"\u5757\u7EA7\u516C\u5F0F"},footer:{markdownTotal:"\u5B57\u6570",scrollAuto:"\u540C\u6B65\u6EDA\u52A8"}},"en-US":{toolbarTips:{bold:"bold",underline:"underline",italic:"italic",strikeThrough:"strikeThrough",title:"title",sub:"subscript",sup:"superscript",quote:"quote",unorderedList:"unordered list",orderedList:"ordered list",task:"task list",codeRow:"inline code",code:"block-level code",link:"link",image:"image",table:"table",mermaid:"mermaid",katex:"formula",revoke:"revoke",next:"undo revoke",save:"save",prettier:"prettier",pageFullscreen:"fullscreen in page",fullscreen:"fullscreen",preview:"preview",previewOnly:"preview only",htmlPreview:"html preview",catalog:"catalog",github:"source code"},titleItem:{h1:"Lv1 Heading",h2:"Lv2 Heading",h3:"Lv3 Heading",h4:"Lv4 Heading",h5:"Lv5 Heading",h6:"Lv6 Heading"},imgTitleItem:{link:"Add Image Link",upload:"Upload Images",clip2upload:"Clip Upload"},linkModalTips:{linkTitle:"Add Link",imageTitle:"Add Image",descLabel:"Desc:",descLabelPlaceHolder:"Enter a description...",urlLabel:"Link:",urlLabelPlaceHolder:"Enter a link...",buttonOK:"OK"},clipModalTips:{title:"Crop Image",buttonUpload:"Upload"},copyCode:{text:"Copy",successTips:"Copied!",failTips:"Copy failed!"},mermaid:{flow:"flow",sequence:"sequence",gantt:"gantt",class:"class",state:"state",pie:"pie",relationship:"relationship",journey:"journey"},katex:{inline:"inline",block:"block"},footer:{markdownTotal:"Character Count",scrollAuto:"Scroll Auto"}}},qe={modelValue:"",theme:"light",className:"",onChange:()=>{},onSave:()=>{},pageFullscreen:!1,preview:!0,htmlPreview:!1,language:"zh-CN",toolbars:be,toolbarsExclude:[],noPrettier:!1,onHtmlChanged:()=>{},onGetCatalog:()=>{},tabWidth:2,showCodeRowNumber:!0,previewTheme:"default",mdHeadingId:_=>_,style:{},tableShape:[6,4],noMermaid:!1,sanitize:_=>_,placeholder:"",noKatex:!1,defToolbars:[],onError:()=>{},codeTheme:"atom",footers:W,scrollAuto:!0,defFooters:[],formatCopiedText:_=>_,noUploadImg:!1,codeStyleReverse:!0,codeStyleReverseList:["default","mk-cute"],autoFocus:!1,disabled:!1,readOnly:!1,autoDetectCode:!1,noHighlight:!1,noImgZoomIn:!1,inputBoxWidth:"50%",sanitizeMermaid:_=>Promise.resolve(_),transformImgUrl:_=>_,codeFoldable:!0,autoFoldThreshold:30},Ve={editorExtensions:{highlight:{js:Ke,css:Ze},prettier:{standaloneJs:Xe.main,parserMarkdownJs:Xe.markdown},cropper:C({},dt),screenfull:{js:ut},mermaid:{js:mt},katex:C({},pt)},editorExtensionsAttrs:{},editorConfig:{languageUserDefined:{},mermaidTemplate:{},renderDelay:500,zIndex:2e4},codeMirrorExtensions:(_,se)=>se,markdownItConfig:()=>{},markdownItPlugins:_=>_,mermaidConfig:_=>_,katexConfig:_=>_},Qe=_=>(0,d.$N)(Ve,_,{excludeKeys(se){return/[iI]{1}nstance/.test(se)}}),Re=170}}]);})();

//# sourceMappingURL=n.md-editor-rt.364b1e.chunk.js.map